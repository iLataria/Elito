(function(scope){
function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).iampakopako=e()}(function(){return function n(i,s,o){function a(t,e){if(!s[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=s[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,s,o)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t,r,n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!==_typeof(i))throw new TypeError(i+"must be non-object");for(var s in i)t=i,r=s,Object.prototype.hasOwnProperty.call(t,r)&&(e[s]=i[s])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){for(var t,r,n,i=0,s=0,o=e.length;s<o;s++)i+=e[s].length;for(n=new Uint8Array(i),s=t=0,o=e.length;s<o;s++)r=e[s],n.set(r,t),t+=r.length;return n}},s={arraySet:function(e,t,r,n,i){for(var s=0;s<n;s++)e[i+s]=t[r+s]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],2:[function(e,t,r){"use strict";var u=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var c=new u.Buf8(256),n=0;n<256;n++)c[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;function d(e,t){if(t<65534&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,u.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}c[254]=c[254]=1,r.string2buf=function(e){for(var t,r,n,i,s=e.length,o=0,a=0;a<s;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new u.Buf8(o),a=i=0;i<o;a++)55296==(64512&(r=e.charCodeAt(a)))&&a+1<s&&56320==(64512&(n=e.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},r.buf2binstring=function(e){return d(e,e.length)},r.binstring2buf=function(e){for(var t=new u.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){for(var r,n,i=t||e.length,s=new Array(2*i),o=0,a=0;a<i;)if((r=e[a++])<128)s[o++]=r;else if(4<(n=c[r]))s[o++]=65533,a+=n-1;else{for(r&=2===n?31:3===n?15:7;1<n&&a<i;)r=r<<6|63&e[a++],n--;1<n?s[o++]=65533:r<65536?s[o++]=r:(r-=65536,s[o++]=55296|r>>10&1023,s[o++]=56320|1023&r)}return d(s,o)},r.utf8border=function(e,t){for(var r=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=r&&128==(192&e[r]);)r--;return!(r<0)&&0!==r&&r+c[e[r]]>t?r:t}},{"./common":1}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,s=e>>>16&65535|0,o=0;0!==r;){for(r-=o=2e3<r?2e3:r;s=s+(i=i+t[n++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16|0}},{}],4:[function(e,t,r){"use strict";var a=function(){for(var e=[],t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;e[t]=r}return e}();t.exports=function(e,t,r,n){var i=a,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}},{}],5:[function(e,t,r){"use strict";var a,l=e("../utils/common"),u=e("./trees"),f=e("./adler32"),p=e("./crc32"),n=e("./messages"),c=0,d=4,h=0,g=-2,_=-1,v=4,i=2,m=8,y=9,s=286,o=30,D=19,T=2*s+1,E=15,A=3,C=258,b=C+A+1,I=42,S=113,w=1,P=2,x=3,U=4;function k(e,t){return e.msg=n[t],t}function R(e){return(e<<1)-(4<e?9:0)}function O(e){for(var t=e.length;0<=--t;)e[t]=0}function N(e){var t=e.state,r=t.pending;0!==(r=r>e.avail_out?e.avail_out:r)&&(l.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function L(e,t){u._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,N(e.strm)}function B(e,t){e.pending_buf[e.pending++]=t}function M(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function V(e,t){var r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-b?e.strstart-(e.w_size-b):0,c=e.window,d=e.w_mask,l=e.prev,f=e.strstart+C,p=c[s+o-1],h=c[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(r=t)+o]===h&&c[r+o-1]===p&&c[r]===c[s]&&c[++r]===c[s+1]){for(s+=2,r++;c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&c[++s]===c[++r]&&s<f;);if(n=C-(f-s),s=f-C,o<n){if(e.match_start=t,a<=(o=n))break;p=c[s+o-1],h=c[s+o]}}}while((t=l[t&d])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function z(e){var t,r,n,i,s,o,a,u,c,d=e.w_size;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-b)){for(l.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=r=e.hash_size;n=e.head[--t],e.head[t]=d<=n?n-d:0,--r;);for(t=r=d;n=e.prev[--t],e.prev[t]=d<=n?n-d:0,--r;);c+=d}if(0===e.strm.avail_in)break;if(s=e.strm,o=e.window,a=e.strstart+e.lookahead,u=c,c=void 0,c=s.avail_in,r=0===(c=u<c?u:c)?0:(s.avail_in-=c,l.arraySet(o,s.input,s.next_in,c,a),1===s.state.wrap?s.adler=f(s.adler,o,c,a):2===s.state.wrap&&(s.adler=p(s.adler,o,c,a)),s.next_in+=c,s.total_in+=c,c),e.lookahead+=r,e.lookahead+e.insert>=A)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+A-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<b&&0!==e.strm.avail_in)}function F(e,t){for(var r,n;;){if(e.lookahead<b){if(z(e),e.lookahead<b&&t===c)return w;if(0===e.lookahead)break}if(r=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-b&&(e.match_length=V(e,r)),e.match_length>=A)if(n=u._tr_tally(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(L(e,!1),0===e.strm.avail_out))return w}return e.insert=e.strstart<A-1?e.strstart:A-1,t===d?(L(e,!0),0===e.strm.avail_out?x:U):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?w:P}function j(e,t){for(var r,n,i;;){if(e.lookahead<b){if(z(e),e.lookahead<b&&t===c)return w;if(0===e.lookahead)break}if(r=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-b&&(e.match_length=V(e,r),e.match_length<=5&&(1===e.strategy||e.match_length===A&&4096<e.strstart-e.match_start)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-A,n=u._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=A-1,e.strstart++,n&&(L(e,!1),0===e.strm.avail_out))return w}else if(e.match_available){if((n=u._tr_tally(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return w}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=u._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,t===d?(L(e,!0),0===e.strm.avail_out?x:U):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?w:P}function H(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*o+1)),this.bl_tree=new l.Buf16(2*(2*D+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(E+1),this.heap=new l.Buf16(2*s+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*s+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Y(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=i,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?I:S,e.adler=2===t.wrap?0:1,t.last_flush=c,u._tr_init(t),h):k(e,g)}function K(e){var t=Y(e);return t===h&&((e=e.state).window_size=2*e.w_size,O(e.head),e.max_lazy_match=a[e.level].max_lazy,e.good_match=a[e.level].good_length,e.nice_match=a[e.level].nice_length,e.max_chain_length=a[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=A-1,e.match_available=0,e.ins_h=0),t}function W(e,t,r,n,i,s){if(!e)return g;var o=1;if(t===_&&(t=6),n<0?(o=0,n=-n):15<n&&(o=2,n-=16),i<1||y<i||r!==m||n<8||15<n||t<0||9<t||s<0||v<s)return k(e,g);8===n&&(n=9);var a=new q;return(e.state=a).strm=e,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+A-1)/A),a.window=new l.Buf8(2*a.w_size),a.head=new l.Buf16(a.hash_size),a.prev=new l.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new l.Buf8(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=r,K(e)}a=[new H(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(z(e),0===e.lookahead&&t===c)return w;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,L(e,!1),0===e.strm.avail_out))return w;if(e.strstart-e.block_start>=e.w_size-b&&(L(e,!1),0===e.strm.avail_out))return w}return e.insert=0,t===d?(L(e,!0),0===e.strm.avail_out?x:U):(e.strstart>e.block_start&&(L(e,!1),e.strm.avail_out),w)}),new H(4,4,8,4,F),new H(4,5,16,8,F),new H(4,6,32,32,F),new H(4,4,16,16,j),new H(8,16,32,32,j),new H(8,16,128,128,j),new H(8,32,128,256,j),new H(32,128,258,1024,j),new H(32,258,258,4096,j)],r.deflateInit=function(e,t){return W(e,t,m,15,8,0)},r.deflateInit2=W,r.deflateReset=K,r.deflateResetKeep=Y,r.deflateSetHeader=function(e,t){return!e||!e.state||2!==e.state.wrap?g:(e.state.gzhead=t,h)},r.deflate=function(e,t){var r,n,i,s;if(!e||!e.state||5<t||t<0)return e?k(e,g):g;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&t!==d)return k(e,0===e.avail_out?-5:g);if(r.strm=e,o=r.last_flush,r.last_flush=t,r.status===I&&(2===r.wrap?(e.adler=0,B(r,31),B(r,139),B(r,8),r.gzhead?(B(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),B(r,255&r.gzhead.time),B(r,r.gzhead.time>>8&255),B(r,r.gzhead.time>>16&255),B(r,r.gzhead.time>>24&255),B(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),B(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(B(r,255&r.gzhead.extra.length),B(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=p(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(B(r,0),B(r,0),B(r,0),B(r,0),B(r,0),B(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),B(r,3),r.status=S)):(s=m+(r.w_bits-8<<4)<<8,s|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=S,M(r,s),0!==r.strstart&&(M(r,e.adler>>>16),M(r,65535&e.adler)),e.adler=1)),69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=p(e.adler,r.pending_buf,r.pending-n,n)),N(e),n=r.pending,r.pending!==r.pending_buf_size));)B(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=p(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=p(e.adler,r.pending_buf,r.pending-n,n)),N(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,B(r,i),0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=p(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=p(e.adler,r.pending_buf,r.pending-n,n)),N(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,B(r,i),0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=p(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&N(e),r.pending+2<=r.pending_buf_size&&(B(r,255&e.adler),B(r,e.adler>>8&255),e.adler=0,r.status=S)):r.status=S),0!==r.pending){if(N(e),0===e.avail_out)return r.last_flush=-1,h}else if(0===e.avail_in&&R(t)<=R(o)&&t!==d)return k(e,-5);if(666===r.status&&0!==e.avail_in)return k(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var o=2===r.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(z(e),0===e.lookahead)){if(t===c)return w;break}if(e.match_length=0,r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return w}return e.insert=0,t===d?(L(e,!0),0===e.strm.avail_out?x:U):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?w:P}(r,t):3===r.strategy?function(e,t){for(var r,n,i,s,o=e.window;;){if(e.lookahead<=C){if(z(e),e.lookahead<=C&&t===c)return w;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=A&&0<e.strstart&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){for(s=e.strstart+C;n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s;);e.match_length=C-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(r=u._tr_tally(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=u._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(L(e,!1),0===e.strm.avail_out))return w}return e.insert=0,t===d?(L(e,!0),0===e.strm.avail_out?x:U):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?w:P}(r,t):a[r.level].func(r,t);if(o!==x&&o!==U||(r.status=666),o===w||o===x)return 0===e.avail_out&&(r.last_flush=-1),h;if(o===P&&(1===t?u._tr_align(r):5!==t&&(u._tr_stored_block(r,0,0,!1),3===t&&(O(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),N(e),0===e.avail_out))return r.last_flush=-1,h}return t!==d?h:r.wrap<=0?1:(2===r.wrap?(B(r,255&e.adler),B(r,e.adler>>8&255),B(r,e.adler>>16&255),B(r,e.adler>>24&255),B(r,255&e.total_in),B(r,e.total_in>>8&255),B(r,e.total_in>>16&255),B(r,e.total_in>>24&255)):(M(r,e.adler>>>16),M(r,65535&e.adler)),N(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==I&&69!==t&&73!==t&&91!==t&&103!==t&&t!==S&&666!==t?k(e,g):(e.state=null,t===S?k(e,-3):h):g},r.deflateSetDictionary=function(e,t){var r,n,i,s,o,a,u,c=t.length;if(!e||!e.state)return g;if(2===(s=(r=e.state).wrap)||1===s&&r.status!==I||r.lookahead)return g;for(1===s&&(e.adler=f(e.adler,t,c,0)),r.wrap=0,c>=r.w_size&&(0===s&&(O(r.head),r.strstart=0,r.block_start=0,r.insert=0),u=new l.Buf8(r.w_size),l.arraySet(u,t,c-r.w_size,r.w_size,0),t=u,c=r.w_size),o=e.avail_in,a=e.next_in,u=e.input,e.avail_in=c,e.next_in=0,e.input=t,z(r);r.lookahead>=A;){for(n=r.strstart,i=r.lookahead-(A-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+A-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=A-1,z(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=A-1,r.match_available=0,e.next_in=a,e.input=u,e.avail_in=o,r.wrap=s,h},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(e,t,r){"use strict";var i=e("../utils/common"),a=0,u=1;function n(e){for(var t=e.length;0<=--t;)e[t]=0}var o=29,c=256,d=c+1+o,l=30,f=19,_=2*d+1,v=15,s=16,p=7,h=256,g=16,m=17,y=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(d+2));n(C);var b=new Array(2*l);n(b);var I=new Array(512);n(I);var S=new Array(256);n(S);var w=new Array(o);n(w);var P,x,U,k=new Array(l);function R(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function O(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?I[e]:I[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function B(e,t,r){e.bi_valid>s-r?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>s-e.bi_valid,e.bi_valid+=r-s):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function M(e,t,r){B(e,r[2*t],r[2*t+1])}function V(e,t){for(var r=0;r|=1&e,e>>>=1,r<<=1,0<--t;);return r>>>1}function z(e,t,r){for(var n,i=new Array(v+1),s=0,o=1;o<=v;o++)i[o]=s=s+r[o-1]<<1;for(n=0;n<=t;n++){var a=e[2*n+1];0!==a&&(e[2*n]=V(i[a]++,a))}}function F(e){for(var t=0;t<d;t++)e.dyn_ltree[2*t]=0;for(t=0;t<l;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*h]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function j(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,r,n){var i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]}function q(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function Y(e,t,r){var n,i,s,o,a=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0==n?M(e,i,t):(M(e,(s=S[i])+c+1,t),0!==(o=D[s])&&B(e,i-=w[s],o),M(e,s=N(--n),r),0!==(o=T[s])&&B(e,n-=k[s],o)),a<e.last_lit;);M(e,h,t)}function K(e,t){var r,n,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=_,r=0;r<u;r++)0!==s[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):s[2*r+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;1<=r;r--)q(e,s,r);for(i=u;r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],q(e,s,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,s[2*i]=s[2*r]+s[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,s[2*r+1]=s[2*n+1]=i,e.heap[1]=i++,q(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){for(var r,n,i,s,o,a=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,h=0,g=0;g<=v;g++)e.bl_count[g]=0;for(a[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<_;r++)p<(g=a[2*a[2*(n=e.heap[r])+1]+1]+1)&&(g=p,h++),a[2*n+1]=g,u<n||(e.bl_count[g]++,s=0,f<=n&&(s=l[n-f]),o=a[2*n],e.opt_len+=o*(g+s),d&&(e.static_len+=o*(c[2*n+1]+s)));if(0!==h){do{for(g=p-1;0===e.bl_count[g];)g--}while(e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[p]--,0<(h-=2));for(g=p;0!==g;g--)for(n=e.bl_count[g];0!==n;)u<(i=e.heap[--r])||(a[2*i+1]!==g&&(e.opt_len+=(g-a[2*i+1])*a[2*i],a[2*i+1]=g),n--)}}(e,t),z(s,c,e.bl_count)}function W(e,t,r){var n,i,s=-1,o=t[1],a=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<u&&i===o||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*g]++):a<=10?e.bl_tree[2*m]++:e.bl_tree[2*y]++,s=i,c=(a=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4))}function G(e,t,r){var n,i,s=-1,o=t[1],a=0,u=7,c=4;for(0===o&&(u=138,c=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<u&&i===o)){if(a<c)for(;M(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(M(e,i,e.bl_tree),a--),M(e,g,e.bl_tree),B(e,a-3,2)):a<=10?(M(e,m,e.bl_tree),B(e,a-3,3)):(M(e,y,e.bl_tree),B(e,a-11,7));s=i,c=(a=0)===o?(u=138,3):i===o?(u=6,3):(u=7,4)}}n(k);var X=!1;function J(e,t,r,n){B(e,0+(n?1:0),3),n=t,t=r,r=!0,j(e=e),r&&(L(e,t),L(e,~t)),i.arraySet(e.pending_buf,e.window,n,t,e.pending),e.pending+=t}r._tr_init=function(e){X||(function(){for(var e,t,r,n=new Array(v+1),i=0,s=0;s<o-1;s++)for(w[s]=i,e=0;e<1<<D[s];e++)S[i++]=s;for(S[i-1]=s,s=r=0;s<16;s++)for(k[s]=r,e=0;e<1<<T[s];e++)I[r++]=s;for(r>>=7;s<l;s++)for(k[s]=r<<7,e=0;e<1<<T[s]-7;e++)I[256+r++]=s;for(t=0;t<=v;t++)n[t]=0;for(e=0;e<=143;)C[2*e+1]=8,e++,n[8]++;for(;e<=255;)C[2*e+1]=9,e++,n[9]++;for(;e<=279;)C[2*e+1]=7,e++,n[7]++;for(;e<=287;)C[2*e+1]=8,e++,n[8]++;for(z(C,d+1,n),e=0;e<l;e++)b[2*e+1]=5,b[2*e]=V(e,5);P=new R(C,D,c+1,d,v),x=new R(b,T,0,l,v),U=new R(new Array(0),E,0,f,p)}(),X=!0),e.l_desc=new O(e.dyn_ltree,P),e.d_desc=new O(e.dyn_dtree,x),e.bl_desc=new O(e.bl_tree,U),e.bi_buf=0,e.bi_valid=0,F(e)},r._tr_stored_block=J,r._tr_flush_block=function(e,t,r,n){var i,s,o=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,r=0;r<=31;r++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*r])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return u;for(r=32;r<c;r++)if(0!==e.dyn_ltree[2*r])return u;return a}(e)),K(e,e.l_desc),K(e,e.d_desc),o=function(e){var t;for(W(e,e.dyn_ltree,e.l_desc.max_code),W(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),t=f-1;3<=t&&0===e.bl_tree[2*A[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?J(e,t,r,n):4===e.strategy||s===i?(B(e,2+(n?1:0),3),Y(e,C,b)):(B(e,4+(n?1:0),3),function(e,t,r,n){var i;for(B(e,t-257,5),B(e,r-1,5),B(e,n-4,4),i=0;i<n;i++)B(e,e.bl_tree[2*A[i]+1],3);G(e,e.dyn_ltree,t-1),G(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Y(e,e.dyn_ltree,e.dyn_dtree)),F(e),n&&j(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(S[r]+c+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){B(e,2,3),M(e,h,C),16===(e=e).bi_valid?(L(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":1}],8:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(e,t,r){"use strict";var o=e("./zlib/deflate"),a=e("./utils/common"),u=e("./utils/strings"),n=e("./zlib/messages"),i=e("./zlib/zstream"),c=Object.prototype.toString;function s(e){if(!(this instanceof s))return new s(e);this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;if(t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,(this.strm.avail_out=0)!==(e=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy)))throw new Error(n[e]);if(t.header&&o.deflateSetHeader(this.strm,t.header),t.dictionary){t="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary;if(0!==(e=o.deflateSetDictionary(this.strm,t)))throw new Error(n[e]);this._dict_set=!0}}function d(e,t){t=new s(t);if(t.push(e,!0),t.err)throw t.msg||n[t.err];return t.result}s.prototype.push=function(e,t){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===c.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=o.deflate(i,n))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(u.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out))),(0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==n||(this.onEnd(0),!(i.avail_out=0))},s.prototype.onData=function(e){this.chunks.push(e)},s.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=s,r.deflate=d,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,d(e,t)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,n,i,s,o,a="",u=0;for(e=Base64._utf8_encode(e);u<e.length;)n=(o=e.charCodeAt(u++))>>2,i=(3&o)<<4|(t=e.charCodeAt(u++))>>4,s=(15&t)<<2|(r=e.charCodeAt(u++))>>6,o=63&r,isNaN(t)?s=o=64:isNaN(r)&&(o=64),a=a+this._keyStr.charAt(n)+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(o);return a},isEncode:function(e){if(null===e||""===e||""===e.trim())return!1;try{return btoa(atob(e))==e}catch(e){return!1}},decode:function(e){var t,r,n,i,s,o,a="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)n=this._keyStr.indexOf(e.charAt(u++)),t=(15&(i=this._keyStr.indexOf(e.charAt(u++))))<<4|(s=this._keyStr.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(o=this._keyStr.indexOf(e.charAt(u++))),a+=String.fromCharCode(n<<2|i>>4),64!=s&&(a+=String.fromCharCode(t)),64!=o&&(a+=String.fromCharCode(r));return a=Base64._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){var t,r="",n=0;for(c1=c2=0;n<e.length;)(t=e.charCodeAt(n))<128?(r+=String.fromCharCode(t),n++):191<t&&t<224?(c2=e.charCodeAt(n+1),r+=String.fromCharCode((31&t)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),r+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),n+=3);return r}},DTDHelpers={forEach:function(e,t){for(var r=0;r<t.length;++r)e(t[r],r)},format:function(e,r){return 1===r.length&&null!==r[0]&&"object"===_typeof(r[0])&&(r=r[0]),e.replace(/{([^}]*)}/g,function(e,t){return void 0!==r[t]?r[t]:e})},generateUUID:function(){var r=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"===e?t:3&t|8).toString(16)})},forEachObj:function(e,t){for(var r in t)t.hasOwnProperty(r)&&e(t[r],r);return{}},findObj:function(e,t){for(var r in t)if(t.hasOwnProperty(r)&&e(t[r],r))return t[r];return null},trimmer:function(e){return e=e&&e.toString().trim()},filterObj:function(e,t){var r,n={};for(r in t)t.hasOwnProperty(r)&&e(t[r],r)&&(n[r]=t[r]);return n},parseUrlParams:function(e,t){e=decodeURIComponent(e),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&=]"+t+"=([^&#]*)").exec(e);return null===e||e&&"string"!=typeof e[1]&&e[1].length?"":decodeURIComponent(e[1]).replace(/\+/g," ")}},DTDTypeValidator={isFunction:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNull:function(e){return null===e},isArray:function(e){return!!e&&-1<e.constructor.toString().indexOf("Array")},isObject:function(e){return e===Object(e)&&!DTDTypeValidator.isArray(e)},isNullOrEmpty:function(e){if(void 0===e)return!0;if("function"==typeof e||"[object Date]"===Object.prototype.toString.call(e))return!1;if(DTDTypeValidator.isNumber(e)||DTDTypeValidator.isBoolean(e))return DTDTypeValidator.isNull(e);if(DTDTypeValidator.isNull(e)||0===DTDHelpers.trimmer(e).length)return!0;if("object"!==_typeof(e))return!1;for(var t in e)return!1;return!0},isNumber:function(e){return"number"==typeof e},isInteger:function(e){return"number"==typeof e&&parseInt(e)===e},isBoolean:function(e){return"boolean"==typeof e},isArrayEqual:function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},isEqual:function(e,t){if(null===e&&e===t)return!0;if(_typeof(e)===_typeof(t))switch(_typeof(e)){case"number":case"string":case"boolean":return e===t;case"object":if(DTDTypeValidator.isArray(e)&&DTDTypeValidator.isArray(t))return DTDTypeValidator.isArrayEqual(e,t);if(DTDTypeValidator.isObject(e)&&DTDTypeValidator.isObject(t))return JSON.stringify(e)===JSON.stringify(t)}return!1}},DTDTransformer={delNotValidChars:function(e){var t;return"string"==typeof e&&(t=new RegExp("\\p{C}","ug"),e=e.replace(t,"")),e},format:function(e,r){return 1===r.length&&null!==r[0]&&"object"===_typeof(r[0])&&(r=r[0]),e.replace(/{([^}]*)}/g,function(e,t){return void 0!==r[t]?r[t]&&r[t].toString():e})},languageToISO639_1:function(e){var t=null;return t=!DTDTypeValidator.isNullOrEmpty(e)&&DTDTypeValidator.isString(e)?(t=e.split("-"))[0].toLowerCase():t}},DTDSystemManager=function(){var e,o=DTDTypeValidator,t="name",r="version",i=function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},s={rgx:function(e,t){for(var r,n,i,s,o,a=0;a<t.length&&!s;){for(var u=t[a],c=t[a+1],d=r=0;d<u.length&&!s;)if(s=u[d++].exec(e))for(n=0;n<c.length;n++)o=s[++r],"object"===_typeof(i=c[n])&&0<i.length?2==i.length?"function"==typeof i[1]?this[i[0]]=i[1].call(this,o):this[i[0]]=i[1]:3==i.length?"function"!=typeof i[1]||i[1].exec&&i[1].test?this[i[0]]=o?o.replace(i[1],i[2]):void 0:this[i[0]]=o?i[1].call(this,o,i[2]):void 0:4==i.length&&(this[i[0]]=o?i[3].call(this,o.replace(i[1],i[2])):void 0):this[i]=o||void 0;a+=2}},str:function(e,t){for(var r in t)if("object"===_typeof(t[r])&&0<t[r].length){for(var n=0;n<t[r].length;n++)if(i(t[r][n],e))return"?"===r?void 0:r}else if(i(t[r],e))return"?"===r?void 0:r;return e}},n={os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},a={os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,r],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[t,[r,s.str,n.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[r,s.str,n.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],r],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[t,r],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[t,"Symbian"],r],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],r],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[t,r],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],r],[/(sunos)\s?([\w\.\d]*)/i],[[t,"Solaris"],r],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[t,r],[/(haiku)\s(\w+)/i],[t,r],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[r,/_/g,"."],[t,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac OS"],[r,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[t,r]],bot:["Slurp","nuhk","YandexBot","YandexAccessibilityBot","YandexMobileBot","YandexDirectDyn","yammybot","Openbot","MSNBot","YandexScreenshotBot","YandexImages","YandexVideo","YandexVideoParser","YandexMedia","YandexBlogs","YandexFavicons","YandexWebmaster","YandexPagechecker","YandexImageResizer","YandexAdNet","YandexDirect","YaDirectFetcher","YandexCalendar","YandexSitelinks","YandexMetrika","YandexNews","YandexNewslinks","YandexCatalog","YandexAntivirus","YandexMarket","YandexVertis","YandexForDomain","YandexSpravBot","YandexSearchShop","YandexMedianaBot","YandexOntoDB","YandexOntoDBAPI","Googlebot","Googlebot-Image","Mediapartners-Google","AdsBot-Google","Mail.RU_Bot","bingbot","Accoona","ia_archiver","Ask Jeeves","OmniExplorer_Bot","W3C_Validator","WebAlta","YahooFeedSeeker","Yahoo!","Ezooms","Tourlentabot","MJ12bot","AhrefsBot","SearchBot","SiteStatus","Nigma.ru","Baiduspider","Statsbot","SISTRIX","AcoonBot","findlinks","proximic","OpenindexSpider","statdom.ru","Exabot","Spider","SeznamBot","oBot","C-T bot","Updownerbot","Snoopy","heritrix","Yeti","DomainVader","DCPbot","PaperLiBot"]};function u(){var n={};this._get=function(e){return void 0!==n[e]?n[e]:null},this._set=function(e,t){n[e]=t},function(){try{var r=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",e={name:void 0,version:void 0};s.rgx.call(e,r,a.os),(n={appId:null,base64:!0,osName:e.name||"unknown",osVer:e.version||"unknown",sdkVer:"2.2",sdkVerCode:20,agent:r,tzOffset:-60*(new Date).getTimezoneOffset(),lang:DTDTransformer.languageToISO639_1("undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)),resolution:window.screen.width+"x"+window.screen.height,apiUrl:"https://statgw.devtodev.com/",callbackDId:null,isBot:!1,engine:"Native"}).isBot=!!DTDHelpers.findObj(function(e,t){return r.includes(e)},a.bot)}catch(e){}}()}return u.prototype.setSdkVerCode=function(e){"Native"!==this._get("engine")&&this._set("sdkVerCode",e)},u.prototype.setSdkVer=function(e){"Native"!==this._get("engine")&&this._set("sdkVer",e)},u.prototype.setTestCustomUrl=function(e){this._set("testName",e)},u.prototype.getTestCustomUrl=function(){return this._get("testName")},u.prototype.setApiUrl=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1)),this._set("apiUrl",e)},u.prototype.getApiUrl=function(){return this._get("apiUrl")},u.prototype.setEnv=function(e){if(void 0!==e)for(var t=["engine","base64"],r=t.length-1;0<=r;r--)void 0!==e[t[r]]&&this._set(t[r],e[t[r]])},u.prototype.isBase64=function(){return this._get("base64",!0)},u.prototype.setAppId=function(e){return this._set("appId",e)},u.prototype.getAppId=function(){return this._get("appId")},u.prototype.getSdkVer=function(){return this._get("sdkVer")},u.prototype.getSdkVerCode=function(){return this._get("sdkVerCode")},u.prototype.getUA=function(){return this._get("agent")},u.prototype.getTzOffset=function(){return this._get("tzOffset")},u.prototype.getLanguage=function(){return this._get("lang")},u.prototype.getOsName=function(){return this._get("osName")},u.prototype.getOsVer=function(){return this._get("osVer")},u.prototype.getDisplayResolution=function(){return this._get("resolution")},u.prototype.buildUrl=function(e,t){var r=this._get("testName"),n=this._get("apiUrl");o.isString(r)&&!o.isNullOrEmpty(r)&&e.unshift(r);var i,s="";for(i in t)s+=""!==s?"&":"",s+=i+"="+encodeURIComponent(t[i]);return n+e.join("/")+"?"+s},u.prototype.setCallbackDId=function(e){!o.isFunction(e)&&null!==e||this._set("callbackDId",e)},u.prototype.getCallbackDId=function(){return this._get("callbackDId")},u.prototype.isBot=function(){return this._get("isBot")},u.prototype.useXDR=function(){return!!window.XDomainRequest},u.prototype.getEngine=function(){return this._get("engine")},{getInstance:function(){return e=e||new u}}}(),DTDLogger=function(){"use strict";function r(e,t,r){if(_&&p[e]<=p[_]){var n,i=(s=new Date,o=s.getDate(),a=s.getMonth()+1,u=s.getFullYear(),c=s.getHours(),d=s.getMinutes(),l=s.getSeconds(),i=s.getMilliseconds(),u+"/"+(s=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,r=e.toString().length;return(r<t?"0".repeat(t-r):"")+e})(a)+"/"+s(o)+" "+s(c)+":"+s(d)+":"+s(l)+":"+s(i,3));if(g.isNullOrEmpty(r)||(t=h.format(t,r)),void 0!==f)f(e,t);else{switch(t=i+" [Devtodev "+v.getSdkVer()+"] "+e+" "+t,p[e]){case p.Error:n=console.error;break;case p.Warning:n=console.warn;break;case p.Info:n=console.info;break;case p.Debug:n=console.log}void 0!==n&&n(t)}}var s,o,a,u,c,d,l,i}function e(){}var f,p={No:0,Error:1,Warning:3,Info:7,Debug:15},t=null,h=DTDTransformer,g=DTDTypeValidator,_="No",v=DTDSystemManager.getInstance();return e.prototype.setLogLevel=function(e){g.isNullOrEmpty(e)||g.isNullOrEmpty(p[e])?this.warning("Invalid log level: {type}. Avaliable levels: [No, Error, Warning, Info, Debug]",{type:e}):_=e},e.prototype.getLogLevel=function(){return _},e.prototype.warning=function(e,t){r("Warning",e,t)},e.prototype.info=function(e,t){r("Info",e,t)},e.prototype.error=function(e,t){r("Error",e,t)},e.prototype.debug=function(e,t){r("Debug",e,t)},e.prototype.setCallback=function(e){f=e},{getInstance:function(){return t=t||new e}}}(),DTDRequestHeader={DeviceId:"DeviceId",PreviousDeviceId:"PreviousDeviceId",UserId:"UserId",PreviousUserId:"PreviousUserId",DevtodevId:"DevtodevId",CrossPlatformDevtodevId:"CrossPlatformDevtodevId",DevtodevIdTimestamp:"DevtodevIdTimestamp",Encoding:"X-Id-Encoding"},DTDRequestResponse={DevtodevId:"devtodevId",CrossPlatformDevtodevId:"crossPlatformDevtodevId",DevtodevIdTimestamp:"devtodevIdTimestamp",IsNewUser:"newUser",RegistrationDate:"created",paymentsCount:"pCount",paymentsSum:"pSum",firstVersion:"firstVersion",payingCapacity:"pCapacity",sbsPaymentsCount:"sbsCount",sbsPaymentsSum:"sbsSum",sbsStatus:"sbsStatus",channel:"channel",campaign:"campaign"},DTDDefaultsFields={LogLevel:"logLevel",CurrentLevel:"currentLevel",AppVersion:"applicationVersion",Tracking:"trackingAvailability",UserId:"userId"},DTDUserExperimentsKeys={Id:"1",Group:"2"},DTDUserExperimentStorage={ActiveExperiment:"3",RefusedExperiments:"4"},DTDUserExperimentsMarks={Refused:"1",TemporaryProcessed:"2"},DTDUserStorage={UserId:"2",PrevUserId:"3",TimeSentBalance:"4",DevtodevId:"5",CrossPlatformDevtodevId:"6",RegistrationDate:"7",LastForeground:"8",SessionLength:"9",SessionStarted:"10",TutorialSteps:"11",CurrentLevel:"12",ReferralSatus:"14",CurrencyAccrual:"15",Profile:"16",UpdateProfile:"17",IsPayingUser:"19",UserExperiment:"20",Tracking:"21",IsDefault:"22",BackendAsk:"23",LastActive:"24",DeviceId:"25",UserProperties:"26",PrevDeviceId:"28",DevtodevIdTimestamp:"31",DeviceCounting:"1",IsNewUser:"32"},DTDAppStorage={UUID:"0",AppVersion:"1",TransactionIds:"2",Config:"4",IsMigration:"5"},DTDEventStorage={PrimaryId:"0",PrimaryUserId:"1",language:"2",appVersion:"3",sdkVersion:"4",sdkCodeVersion:"5",Forced:"6",Params:"7",Code:"8",engine:"9"},DTDExperimentStorage={id:"0",conditions:"1",isTesting:"2",parameters:"3",creationDate:"4",updateDate:"5",completionDate:"6"},AccrualTypes={0:"earned",1:"bought"},DTDPeople={Tester:"tester",Cheater:"cheater"},DTDRemoteConfigSource={Defaults:"defaults",Remote:"remote",Empty:"empty"},DTDEventParams={Code:"code",Timestamp:"timestamp",SessionId:"sessionId",InExperiments:"inExperiments",Level:"level"},UTM_TERM="term",UTM_MEDIUM="medium",UTM_SOURCE="source",UTM_CONTENT="content",UTM_CAMPAIGN="campaign",SP_CODE="sp",SP_NET="socialNetwork",SP_REASON="postReason",SC_CODE="sc",SC_NET="socialNetwork",TR_CODE="tr",TR_STEP="step",RP_CODE="rp",RP_PRICE="price",RP_ORDER_ID="orderId",RP_PRODUCT_ID="productId",RP_CURRENCY="currencyCode",VP_CODE="vp",VP_PURCHASE_ID="purchaseId",VP_PURCHASE_TYPE="purchaseType",VP_PURCHASE_PRICE="purchasePrice",VP_PURCHASE_AMOUNT="purchaseAmount",VP_PURCHASE_CURRENCY="purchasePriceCurrency",DI_CODE="di",DI_OS_VER="osVersion",DI_OS="os",DI_UUID="uuid",DI_UA="userAgent",DI_TZ="timeZoneOffset",DI_DISPLAY_RESOLUTION="displayResolution",CE_CODE="ce",CE_NAME="name",CE_PARAMS="parameters",LU_CODE="lu",LU_LEVEL="level",LU_SPENT="spent",LU_EARND="earned",LU_BOUGHT="bought",LU_BALANCE="balance",UE_CODE="ue",UE_LN="length",AL_CODE="al",RF_CODE="rf",SS_CODE="ss",CA_CODE="ca",CA_CURRENCY_NAME="currencyName",CA_CURRENCY_AMOUNT="currencyAmount",CA_TYPE="accrualType",CA_SOURCE="currencySource",PE_CODE="pe",PE_NAME="name",PE_PARAMS="parameters",PE_SPENT="spent",PE_EARND="earned",PE_SOURCE="source",PE_DIFFICULTY="difficulty",PE_SUCCESS="successfulCompletion",PE_DURATION="duration",TS_CODE="ts",TS_ALLOWED="trackingAllowed",PL_CODE="pl",PL_PARAMS="parameters",CB_CODE="cb",Int32Max=2147483647,Int32Min=-2147483647,Int64Max=Number.MAX_SAFE_INTEGER,Int64Min=Number.MIN_SAFE_INTEGER,MT_INIT="Initialize",ADRV_CODE="adrv",ADRV_NETWORK="ad_network",ADRV_UNIT="ad_unit",ADRV_REVENUE="revenue",ADRV_PLACEMENT="placement",MES_PREFIX="In the {method} method error has occurred: ",AudienceStateKeys={displayDiagonal:"displayDiagonal",language:"language",level:"level",payingUser:"payingUser",lifetime:"lifetime",country:"country",created:"created",firstVersion:"firstVersion",newUser:"newUser",pCapacity:"pCapacity",pCount:"pCount",pSum:"pSum",sbsCount:"sbsCount",sbsSum:"sbsSum",sbsStatus:"sbsStatus",channel:"channel",campaign:"campaign"},AudienceUserStorageMap={level:"CurrentLevel",created:"RegistrationDate",payingUser:"IsPayingUser",newUser:"IsNewUser"};DTDRemoteConfigReceiveResult={Success:"success",Failure:"failure",Empty:"empty"},DTDRemoteConfigChangeResult={Success:"success",Failure:"failure"};var StorageTypes={LocalStorage:"localStorage",Cookies:"cookies",Memory:"memory"},ValidatorRules=function(){"use strict";function w(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=!(4<arguments.length&&void 0!==arguments[4])||arguments[4],s=!L.isNullOrEmpty(r),t={arg:t,method:e};return s||(e="{arg} is empty!",DTDTypeValidator.isNull(r)&&(e="{arg} is null!"),(i||n)&&M(e,t,n)),s}function c(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=!0;return L.isBoolean(r)||(i=!1,M(R,{method:e,arg:t,nType:"boolean",cType:_typeof(r)},n)),i}function P(e,t,r,n,i){var s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],o={arg:t,method:e,nType:"number"},a=L.isNumber(r);return a||(a=!1,o.cType=_typeof(r),M(R,o,s)),a=(a=a&&d(e,t,r,s))&&u(e,t,r,n,i,s)}function x(i,s,e,o,a,u){var c={};return B(function(e,t){var r=N.delNotValidChars(t),n="The ["+r+"] key of the "+s,t="The value of the "+s;V(i,n,r,!1)&&(r=F(i,n,r,o),z(i,t,e,a,u,!1)&&(c[r]=e))},e),c}function U(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Referrer",r=[UTM_SOURCE,UTM_MEDIUM,UTM_CONTENT,UTM_CAMPAIGN,UTM_TERM],n={};i=e,s=t,L.isNullOrEmpty(i)&&M("{method} has empty arguments!",{method:s},!0),L.isObject(i)||M(R,{method:s,arg:"Arguments",nType:"object",cType:_typeof(i)},!0);for(var i,s,o=r.length-1;0<=o;o--){var a,u,c=r[o];void 0!==e[c]&&(a=N.delNotValidChars(e[c]),V(t,u="The value of the utm data dictionary by ["+c+"] key",a,!1)&&(a=F(t,u,a,255),n[c]=a))}return L.isNullOrEmpty(n)&&M("{method} has empty Resources dictionary!",{method:t},!0),n}function k(e,t,r){var n="The order id argument value",i="The price argument value",s="The product id parameter value",o="The currency code parameter value",a=N.delNotValidChars(e[RP_ORDER_ID]),u=e[RP_PRICE],c=N.delNotValidChars(e[RP_PRODUCT_ID]),d=N.delNotValidChars(e[RP_CURRENCY]);if(w(t,i,u)&&P(t,i,u,Int64Min,Int64Max),V(t,n,a)&&(a=F(t,n,a,65),e[RP_ORDER_ID]=a),V(t,s,c)&&(e[RP_PRODUCT_ID]=F(t,s,c,255)),V(t,o,d)&&function(e,t,r,n){var i=!0;r.length!==n&&(i=!1,M("{arg} Parameter length must be equal to [{size}]!",{arg:t,method:e,size:n},!(4<arguments.length&&void 0!==arguments[4])||arguments[4]))}(t,o,d,3),void 0!==r.trIds&&-1!==r.trIds.indexOf(e[RP_ORDER_ID]))throw O.info("This order({order}) has already been sent. Skipped",{order:a}),null;return e}var R="{arg} is [{cType}], but must be [{nType}]",o=(_defineProperty(e={},SC_CODE,SC_NET),_defineProperty(e,SP_CODE,SP_NET),_defineProperty(e,TR_CODE,TR_STEP),_defineProperty(e,CE_CODE,CE_NAME),_defineProperty(e,VP_CODE,VP_PURCHASE_ID),_defineProperty(e,PE_CODE,PE_NAME),e),O=DTDLogger.getInstance(),N=DTDTransformer,L=DTDTypeValidator,B=DTDHelpers.forEachObj,M=function(e,t){if(!(2<arguments.length&&void 0!==arguments[2])||arguments[2])throw new Error(N.format(e,t));O.error(MES_PREFIX+e,t)},V=function(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i={arg:t,method:e,nType:"string"},t=w(e,t,r,n,!(4<arguments.length&&void 0!==arguments[4])||arguments[4]);return t&&((t=L.isString(r))||(i.cType=_typeof(r),M(R,i,n))),t},u=function(e,t,r,n,i){var s,o=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],t={arg:t,method:e},e=!0;return e&&r<n&&(t.val=r,t.min=n,e=!(s="{arg} [{val}] is less than the min [{min}] permitted value!")),e&&i<r&&(t.val=r,t.max=i,e=!(s="{arg} [{val}] is greater than the max [{max}] permitted value!")),e||M(s,t,o),e},d=function(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=!isNaN(r);return r||M("{arg} is the NaN.",{arg:t,method:e},n),r},z=function(e,t,r,n,i){var s=!(5<arguments.length&&void 0!==arguments[5])||arguments[5],o={arg:t,method:e,nType:"integer"},a=L.isInteger(r);return a||(a=!1,o.cType=_typeof(r),M(R,o,s)),a=(a=a&&d(e,t,r,s))&&u(e,t,r,n,i,s)},F=function(e,t,r,n){var i=r.substring(0,n);return i!=r&&O.warning(MES_PREFIX+'{arg}: {value} is longer than it is permitted. The string was truncated to length "{maxLn}"!',{method:e,arg:t,maxLn:n,value:r}),i},e=function(){};return e.prototype.validAppId=function(e,t){var r="The application key argument value",t=N.delNotValidChars(t);return V(e,r,t)?t=F(e,r,t,255):null},e.prototype.validUserId=function(e,t){var r="The user id argument value",t=N.delNotValidChars(t);return V(e,r,t,!1,!1)?F(e,r,t,64):null},e.prototype.validReplaceId=function(e,t,r){var n="The user id argument value";return t=N.delNotValidChars(t),r=N.delNotValidChars(r),L.isNullOrEmpty(t)?t=null:V(e,n,t,!0)&&(t=F(e,n,t,64)),{prevId:t,id:r=V(e,n,r)?F(e,n,r,64):r}},e.prototype.validEvent=function(e,t){var r,s,n,i,o,a,u,c,d,l,f,p,h,g,_,v,m,y,D,T,E,A,C,b,I=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"system",S=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};switch(e){case SC_CODE:return E=t,A=I,C="The social network name argument value",b=N.delNotValidChars(E[SC_NET]),V(A,C,b)&&(E[SC_NET]=F(A,C,b,24)),E;case TR_CODE:return function(e,t,r){var n=e[TR_STEP];if(z(t,"The step argument value",n,Int32Min,Int32Max),n<1&&-1===[0,-1,-2].indexOf(n)&&M("A tutorial step can include only predefined values: 0(Skipped), -1(Start), -2(Finish), and it can also be a positive integer",{method:t}),void 0!==r.steps&&-1!==r.steps.indexOf(n))throw O.info("This tutorial step({step}) has already been sent. Skipped",{step:n}),null;return e}(t,I,S);case SP_CODE:return v=t,m=I,E="The social network name argument value",y=N.delNotValidChars(v[SC_NET]),D="The post reason argument value",T=N.delNotValidChars(v[SP_REASON]),V(m,E,y)&&(v[SC_NET]=F(m,E,y,24)),V(m,D,T)&&(v[SP_REASON]=F(m,D,T,32)),v;case RP_CODE:return k(t,I,S);case VP_CODE:return h=I,y="The purchase identifier",g="The purchase type",m="The purchase amount",D=(p=t)[VP_PURCHASE_AMOUNT],T=N.delNotValidChars(p[VP_PURCHASE_ID]),v=N.delNotValidChars(p[VP_PURCHASE_TYPE]),_=_defineProperty({},VP_PURCHASE_AMOUNT,D),w(h,m,D)&&z(h,m,D,1,Int32Max),V(h,y,T)&&(_[VP_PURCHASE_ID]=F(h,y,T,32)),V(h,g,v)&&(_[VP_PURCHASE_TYPE]=F(h,g,v,96)),void 0===p.r?(y="The purchase currency value",T=N.delNotValidChars(p.c),g=p.p,v="The purchase price value",V(h,y,T)&&(T=F(h,y,T,24)),w(h,v,g)&&z(h,v,g,1,Int32Max)&&(_[VP_PURCHASE_PRICE]=_defineProperty({},T,g))):_[VP_PURCHASE_PRICE]=x(h,"resources dictionary",p.r,24,1,Int32Max),L.isNullOrEmpty(_[VP_PURCHASE_PRICE])&&M("resources dictionary is empty!",{method:h},!0),_;case CE_CODE:return r=t,s=I,n=S,i="The custom event name",o=N.delNotValidChars(r[CE_NAME]),a=r[CE_PARAMS],c="The key of the parameters dictionary",l=!(d={}),f=void(u=0)!==n.maxCeParams?n.maxCeParams:10,V(s,i,o)&&(o=F(s,i,o,72),r[CE_NAME]=o),B(function(e,t){var r,n,i;u<f&&(r=N.delNotValidChars(t),n=!1,i=N.format("The value of the parameters dictionary by [{trimKey}] key",{trimKey:r}),t=e,V(s,c,r,!1)&&w(s,i,t,!1)&&(r=F(s,c,r,32),L.isNumber(e)?n=P(s,i,e,Int64Min,Int64Max,!1):L.isBoolean(e)?n=!0:L.isString(e)?(t=N.delNotValidChars(t),(n=V(s,i,t,!1))&&(t=F(s,c,t,255))):M(R,{arg:i,method:s,cType:_typeof(t),nType:"boolean, integer, number, string"},!1),n&&(d[r]=t,l=!0))),u++},a),delete r[CE_PARAMS],l&&(r[CE_PARAMS]=d,f<u&&O.error("[CustomEventParameters] Limit reached [{amount}] when adding a new parameter",{amount:f})),r;case LU_CODE:return function(e,t){var r,n,i=e[LU_LEVEL],s=[LU_EARND,LU_SPENT,LU_BOUGHT,LU_BALANCE],o={};z(t,"The level argument value",i,1,Int32Max-1),o[LU_LEVEL]=i;for(var a=s.length-1;0<=a;a--)if(!L.isNullOrEmpty(e[r=s[a]])){switch(r){case LU_EARND:o[r]=x(t,n="earn dictionary",e[r],24,1,Int32Max);break;case LU_SPENT:o[r]=x(t,n="spent dictionary",e[r],24,1,Int32Max);break;case LU_BOUGHT:o[r]=x(t,n="bought dictionary",e[r],24,1,Int32Max);break;case LU_BALANCE:o[r]=x(t,n="balances dictionary",e[r],24,Int32Min,Int32Max)}L.isNullOrEmpty(o[r])&&(M("{arg} is empty!",{method:t,arg:n},!1),delete o[r])}return o}(t,I);case RF_CODE:return U(t,I);case ADRV_CODE:return g=t,p=I,h="The network argument value",_="The placement argument value",n="The unit argument value",i=N.delNotValidChars(g[ADRV_NETWORK]),o=g[ADRV_REVENUE],a=N.delNotValidChars(g[ADRV_PLACEMENT]),r=N.delNotValidChars(g[ADRV_UNIT]),g=_defineProperty({},"source","sdk"),V(p,h,i)&&(g[ADRV_NETWORK]=F(p,h,i,100)),V(p,_,a,!1,!1)&&(g[ADRV_PLACEMENT]=F(p,_,a,100)),V(p,n,r,!1,!1)&&(g[ADRV_UNIT]=F(p,n,r,100)),P(p,"The revenue argument value",o,0,Int64Max)&&(g[ADRV_REVENUE]=o),g;case CB_CODE:return function(e,t){e=x(t,"balance",e,24,Int64Min,Int64Max);return L.isNullOrEmpty(e)&&M("balance is empty!",{method:t},!0),{balance:e}}(t,I);default:return t}},e.prototype.isExcluded=function(e,t,r){var n,i={code:t},s=!1;return void 0!==e[t]&&(0===e[t].length?(s=!0,O.info("Event [{code}] is excluded by project configuration",i)):(L.isNullOrEmpty(o[t])&&(n=o[t]),-1!==e[t].indexOf(r[n])&&(i[arg]=n,O.info("Event [{code}] with {arg} argument is excluded by project configuration",i),s=!0))),s},e.prototype.validCA=function(e,t,r,n,i,s){var e="CurrencyAccrual",o="The currency name",a="The currency amount",u="The source",c={},n=N.delNotValidChars(n),t=N.delNotValidChars(t);return V(e,o,t)&&(c[CA_CURRENCY_NAME]=F(e,o,t,24)),V(e,u,n)&&(c[CA_SOURCE]=F(e,u,n,32)),w(e,a,r)&&z(e,a,r,1,Int32Max)&&(c[CA_CURRENCY_AMOUNT]=r),void 0===AccrualTypes[i]&&M("Accrual type can include only predefined values: 0(earned), 1(bought), and it can also be a positive value",{method:e},!0),void 0!==s[AccrualTypes[i]]&&void 0!==s[AccrualTypes[i]][n]&&void 0!==s[AccrualTypes[i]][n][t]&&s[AccrualTypes[i]][n][t]+r>Int32Max&&M("{amountArg} is overflowed",{amountArg:a,method:e},!0),c[CA_TYPE]=i,c},e.prototype.validLevel=function(e,t){return z(e,"The level argument value",t,1,Int32Max-1)},e.prototype.validTraking=function(e,t){return c(e,"status",t,!0)},e.prototype.validAppVer=function(e,t){var r="The app version argument value",t=N.delNotValidChars(t);return V(e,r,t)?t=F(e,r,t,255):null},e.prototype.validSdkCode=function(e,t){return z(e,"The sdk code argument value",t,1,Int32Max-1)},e.prototype.validStartPe=function(e,t,r){var n="The event name argument value",i="The source parameter value",s=N.delNotValidChars(t),t={};return V(e,n,s)&&(t.name=F(e,n,s,40)),L.isNullOrEmpty(r)||(void 0!==r[PE_SOURCE]&&(s=N.delNotValidChars(r[PE_SOURCE]),V(e,i,s)&&(t[PE_SOURCE]=F(e,i,s,40))),void 0!==r[PE_DIFFICULTY]&&z(e,"The difficulty parameter value",r[PE_DIFFICULTY],Int32Min,Int32Max)&&(t[PE_DIFFICULTY]=r[PE_DIFFICULTY])),t},e.prototype.validStopPe=function(e,t,r){var n,i,s="The event name argument value",t=N.delNotValidChars(t),o=[PE_SPENT,PE_EARND],a=_defineProperty({},PE_SUCCESS,!1);if(V(e,s,t)&&(a.name=F(e,s,t,40)),!L.isNullOrEmpty(r)){void 0!==r[PE_DURATION]&&z(e,"The duration parameter value",r[PE_DURATION],0,Int32Max)&&(a[PE_DURATION]=r[PE_DURATION]),void 0!==r[PE_SUCCESS]&&c(e,"The success parameter value",r[PE_SUCCESS],!0)&&(a[PE_SUCCESS]=r[PE_SUCCESS]);for(var u=o.length-1;0<=u;u--)if(void 0!==r[n=o[u]]){switch(n){case PE_EARND:i="Earn",a[n]=x(e,"earn dictionary",r[n],24,1,Int64Max);break;case PE_SPENT:i="Spent",a[n]=x(e,"spent dictionary",r[n],24,1,Int64Max)}L.isNullOrEmpty(a[n])&&(M("{arg} dictionary is empty !",{method:e,arg:i},!1),delete a[n])}}return a},e.prototype.validPlKey=function(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=N.delNotValidChars(t),i="The key argument",t=DTDPeople;if(V(e,i,n,r)){switch((n=F(e,i,n,64)).toLowerCase()){case t.Cheater:case t.Tester:n=n.toLowerCase()}return n}return null},e.prototype.validPlVal=function(e,t,r){var n=DTDPeople,i="The value argument",s=null,o={arg:i};switch(DTDTypeValidator.isNullOrEmpty(r)&&M("{arg} is empty!",o,!0),t){case n.Tester:case n.Cheater:L.isBoolean(r)||M("Invalid value! The [{value}] value of the reserved key [{key}] must be Boolean",{key:t,value:r},!0)}n=_typeof(r);return-1!==["string","number","boolean"].indexOf(n)?L.isNumber(r)?P(e,i,r,Int64Min,Int64Max)&&(s=r):s=L.isBoolean(r)?r:(s=N.delNotValidChars(r),DTDTypeValidator.isNullOrEmpty(s)&&M("{arg} is empty!",o,!0),F(e,i,r,255)):(o.nType="number, string or boolean",o.cType=_typeof(s),M(R,o,!0)),s},e.prototype.validMigration=function(e,t){var r,n={};for(r in t)L.isNullOrEmpty(t[r])||(n[r]=t[r]);return n},e}(),Task=function(){var v=DTDTypeValidator.isNullOrEmpty,m=DTDLogger.getInstance();function e(e,t,r){this._xhr=null,this._key=e,this._structure=t,this._callback=r}return e.prototype={run:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{sync:!1,gzip:!0,method:"POST",timeout:6e3};this.abort();var t,r=this._structure.url,n=!!window.XDomainRequest,i=e.method||"GET",s=this._structure.body||{},o=this._structure.headers||{},a=this._structure.toBase64||[],u=!!e.sync,c=this._callback,d={Method:i,URL:r,Headers:{},EncodedHeaders:{},Content:{}};if(void 0!==this._structure.auxiliary){var l=this._structure.auxiliary;for(g in l)l.hasOwnProperty(g)&&(d[g]=l[g])}function f(e,t,r){void 0!==c&&c(e,t,r)}if(n)m.warning("Cannot be sent because XDomainRequest is being used");else{var p=new window.XMLHttpRequest;"GET"!==i&&"HEAD"!==i&&(n="application/json",s=function(e){var t={};for(g in e)e.hasOwnProperty(g)&&!v(e[g])&&(t[g]=e[g]);return t}(s),d.Content=s,e.gzip?(s=iampakopako.deflate(JSON.stringify(s),{gzip:!0,level:9}),n="application/gzip"):s=JSON.stringify(s),o["content-type"]||o["Content-Type"]||(o["Content-Type"]=n));var h,g,_=!1;for(g in p.withCredentials=!0,u||(p.withCredentials=!!e.withCredentials),p.timeout=e.timeout,p.open(i,r,!u),o)o.hasOwnProperty(g)&&!v(o[g])&&(h=o[g],-1!=a.indexOf(g)&&(t=o[g],h=v(t)?t:Base64.encode(t),_=!0),d.Headers[g]=o[g],d.EncodedHeaders[g]=h,p.setRequestHeader(g,h));_&&(g="X-Id-Encoding",p.setRequestHeader(g,"base64"),d.Headers[g]="base64",d.EncodedHeaders[g]="base64"),p.onload=function(){var e,t=null,r=1223===p.status?204:p.status;if(0!==r){e=p.response||p.responseText;try{e=JSON.parse(e)}catch(e){}}else t=new Error("Internal XMLHttpRequest Error");f(r,e,t)},p.onerror=function(e){(e=!(e instanceof Error)?new Error(""+(e||"Unknown XMLHttpRequest Error")):e).statusCode=0,f(e.statusCode,{},e)},p.ontimeout=function(e){(e=!(e instanceof Error)?new Error(""+(e||"Unknown XMLHttpRequest Error")):e).statusCode=0,f(e.statusCode,{},e)},p.send("function"==typeof ArrayBufferView?s:s.buffer),m.debug(JSON.stringify(d,null,2))}this._xhr=p},abort:function(){v(this._xhr)||this._xhr.abort()}},e}(),DTDApi=function(){function e(){function s(e){void 0!==n[e]&&(n[e].abort(),delete n[e])}var n={};this._run=function(e,t,r){s(e),n[e]=new Task(e,t,function(n,i){return function(e,t,r){n(e,t,r),s(i)}}.bind(this)(r,e)),n[e].run()},this._stop=function(e){s(e)}}return e.prototype={run:function(e,t,r){this._run(e,t,r)},stop:function(e){this._stop(e)}},e}(),EventQueueManager=function(E,A){var e=["language","sdkCodeVersion","sdkVersion","engine","appVersion"],C=DTDHelpers;function t(m,y,D,T){this._status=0,this._tempEvents={},this._freezeTime=null,this._activeAbTest=null;this._freeze=function(e){this._freezeTime=e},this._unfreeze=function(){this._freezeTime=null},this._run=function(){if(0===this._status||0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&3!==this._status){function n(e,t,r,n){n={id:n,status:e};_isNullOrEmpty(r)&&200===e?(D.removeByPrimaryIds(u),setTimeout(function(){c._run(!0)},0),_logger.info("Report [{id}] has been sent successfully",n)):(function(e,t){E.hasTask(_key)&&(E.removeTaskByKey(_key),A.stop(_key),_logger.info("Report has been abort"));e=new DTDTimeManagerTask(function(){t()},e,_key);E.addTask(e)}(15e3,i),c._status=0,_logger.error("Report [{id}] submission failed. Status code: {status}",n),_logger.debug("The network queue is stopped"))}var e,i=this._run.bind(this),t=D.getEventsByUser(y.getPrimaryId()),r={},s=[],o=!0,a=(_defineProperty(l={},_DTDRequestHeader.DeviceId,y.getDeviceId()),_defineProperty(l,_DTDRequestHeader.PreviousDeviceId,y.getPrevDeviceId()),_defineProperty(l,_DTDRequestHeader.UserId,y.getId()),_defineProperty(l,_DTDRequestHeader.PreviousUserId,y.getPrevUserId()),l,y.haveBackendId()&&(null!==y.getD2dCrossId()&&(l[_DTDRequestHeader.CrossPlatformDevtodevId]=y.getD2dCrossId()),l[_DTDRequestHeader.DevtodevId]=y.getD2dId(),l[_DTDRequestHeader.DevtodevIdTimestamp]=y.getD2dTm()),{headers:l,auxiliary:{},toBase64:[_DTDRequestHeader.DeviceId,_DTDRequestHeader.PreviousDeviceId,_DTDRequestHeader.UserId,_DTDRequestHeader.PreviousUserId],url:m.buildUrl(["v2","analytics","report"],{appId:m.getAppId()})}),u={},c=this,d=C.generateUUID();for(e in this._status=1,this._tempEvents)t.push(this._tempEvents[e]);this._tempEvents={};for(var l,f=0;f<Math.min(t.length,T.getCountForRequest());f++){var p=t[f],h=_getHash(p),g=p[_DTDEventStorage.PrimaryId],_=void 0!==p[_DTDEventStorage.Code]?p[_DTDEventStorage.Code]:p[_DTDEventStorage.Params][_DTDEventParams.Code],v=p[_DTDEventStorage.Params][_DTDEventParams.Timestamp];null!==this._freezeTime&&this._freezeTime<v||(_isNullOrEmpty(r[h])&&(r[h]=_createPackage(p),s.push(h)),void 0!==g&&(u[g]=g),o=!1,this._activeAbTest&&(p[_DTDEventStorage.Params][_DTDEventParams.InExperiments]=[{id:this._activeAbTest.id,group:this._activeAbTest.group}]),p[_DTDEventStorage.Params][_DTDEventParams.Code]=_,r[h].events.push(p[_DTDEventStorage.Params]))}D.removeByPrimaryIds({}),o||(reports=(_defineProperty(l={},"registrationDate",y.getRg()),_defineProperty(l,"packages",[]),l),_forEach(function(e,t){reports.packages.push(r[e])},s),a.body={reports:[reports]},a.auxiliary["Content UUID"]=d,_logger.info("Trying to send a report [{id}]",{id:d}),A.run(_key,a,function(e,t,r){n(e,0,r,d)})),this._status=o?0:1}}}return _forEach=C.forEach,_isNullOrEmpty=DTDTypeValidator.isNullOrEmpty,_DTDEventStorage=DTDEventStorage,_DTDEventParams=DTDEventParams,_key="events",_DTDRequestHeader=DTDRequestHeader,_logger=DTDLogger.getInstance(),_getHash=function(r){var n=[];return _forEach(function(e,t){_DTDEventStorage.hasOwnProperty(e)&&n.push(r[_DTDEventStorage[e]])},e),n.join("_")},_createPackage=function(n){var i={events:[]};return _forEach(function(e,t){var r=_DTDEventStorage[e];_isNullOrEmpty(n[r])||(i[e]=n[r])},e),i},t.prototype={start:function(){this._status=0},stop:function(){this._tempEvents={},this._status=2},add:function(e,t){this._tempEvents[e]=t},send:function(){0==this._status&&this._run()},freeze:function(e){e=null==e?(new Date).getTime():e,this._freeze(e)},unfreeze:function(){this._unfreeze()},setActiveAbTest:function(e){this._activeAbTest=e},removeActiveAbTest:function(){this._activeAbTest=null}},t},ConfigManager=function(h,g){function e(i,n,s,o,a,t){function r(e,t,r){if(f=(new Date).getTime(),_isNullOrEmpty(r)&&200===e)d=3,_isFunction(a)&&a(t),_attempt=0;else if(422===e)d=3,_attempt=0;else{var n=c;switch(202===e?(d=5,_retryTimeOutBack=t.retryAfter,n=_retryTimeOutBack,_attempt++):(_attempt=0,d=2),i){case"sdk":_logger.debug("Failed to get analytics configuration, using the default configuration and retrying after "+parseInt(n/1e3)+" seconds");break;case"d2dId":_logger.error("BackendIdentifiers unknown status code "+e)}p(n)}}function u(){var e=function(){var e=(_defineProperty(e={},_DTDRequestHeader.DeviceId,s.getDeviceId()),_defineProperty(e,_DTDRequestHeader.PreviousDeviceId,s.getPrevDeviceId()),_defineProperty(e,_DTDRequestHeader.UserId,s.getId()),_defineProperty(e,_DTDRequestHeader.PreviousUserId,s.getPrevUserId()),e);s.haveBackendId()&&(null!==s.getD2dCrossId()&&(e[_DTDRequestHeader.CrossPlatformDevtodevId]=s.getD2dCrossId()),e[_DTDRequestHeader.DevtodevId]=s.getD2dId());var t={headers:e,toBase64:[_DTDRequestHeader.DeviceId,_DTDRequestHeader.PreviousDeviceId,_DTDRequestHeader.UserId,_DTDRequestHeader.PreviousUserId]},r=[];switch(i){case"sdk":t.body={sdkVersion:n.getSdkVer(),appVersion:o.getAppVer(),excludeVersion:o.getExcludeVer(),sdkCodeVersion:n.getSdkVerCode()},r=["v2","analytics","config"];break;case"exp":r=["v2","remoteconfig","experiments"];break;case"offer":r=["v2","remoteconfig","offer"];break;case"d2dId":r=["v2","analytics","identification"],t.body={attempt:l}}return t.url=n.buildUrl(r,{appId:n.getAppId()}),t}();d=1,_isFunction(t)&&t(e),g.run(i,e,r)}function e(){h.removeTaskByKey(i),g.stop(i)}var c=6e4,d=0,l=1,f=0,p=function(e){e=new DTDTimeManagerTask(u,e,i);h.removeTaskByKey(i),h.addTask(e)};this._pause=function(){-1!=[1,2].indexOf(d)&&(e(),d=4)},this._start=function(){var e;-1!=[0,4].indexOf(d)?u():5==d&&(0<(e=f+_retryTimeOutBack-(new Date).getTime())?p(e):u())},this._clear=function(){e(),d=0}}return _DTDRequestHeader=DTDRequestHeader,_isNullOrEmpty=DTDTypeValidator.isNullOrEmpty,_isFunction=DTDTypeValidator.isFunction,_logger=DTDLogger.getInstance(),e.prototype={start:function(){this._start()},clear:function(){this._clear()},pause:function(){this._pause()}},e},ManagerProgression=function(){function e(){}var i={},s=null,o=DTDLogger.getInstance();return e.prototype.start=function(e,t){return this.clear(),s=e,i={startTime:Date.now(),startBundle:t},o.info("Progression event '{name}' is started",{name:e}),!0},e.prototype.finish=function(e,t){if(null===s)o.warning("Progression event can't be finished! Doesn't have any started progression events");else{if(s==e){o.info("Progression event '{name}' is finished",{name:e});var r,n={name:e,parameters:{}};return void 0!==i.startBundle[PE_SOURCE]&&(n.parameters[PE_SOURCE]=i.startBundle[PE_SOURCE]),n.parameters.success=t[PE_SUCCESS],void 0===t[PE_DURATION]?0<(r=Math.ceil((Date.now()-i.startTime)/1e3))&&(n.parameters[PE_DURATION]=r):n.parameters[PE_DURATION]=t[PE_DURATION],void 0!==i.startBundle[PE_DIFFICULTY]&&(n.parameters[PE_DIFFICULTY]=i.startBundle[PE_DIFFICULTY]),void 0!==t[PE_EARND]&&(n[PE_EARND]=t[PE_EARND]),void 0!==t[PE_SPENT]&&(n[PE_SPENT]=t[PE_SPENT]),i={},s=null,n}o.warning("Progression event can't be finished!\n\tStarted progression event name is [{currentName}]\n\tCurrent event name is [{name}]",{currentName:s,name:e})}return!1},e.prototype.getLocation=function(){return s},e.prototype.clear=function(){i={},null!==s&&o.info("Info Progression event [{name}] is cleared",{name:s}),s=null},e}(),AbTestsManagerFactory=function(e,E){var t=e,A=E,C=DTDHelpers,b=DTDTypeValidator.isNullOrEmpty,I={},S={},w=0,P=15e3,x=!1;function r(e,t,r,s,o,a,u,n,i){var c,d=i,l=[],f={},p=new AudienceState(this,s,t);this._candidateExperiment=null,this._involvedExperiment=null,this._configVersion=null,this._isConfigActualizationRunning=!1,this._configActualizationTask=null,this._configFetchStartTime=0,this._startActivationTask=null,this._isActivationTaskRunning=!1,this._activationTaskStartTime=0,this._groupFetchStartTime=0,this._isActiveExperiment=!1,this._hasSuitableExperiments=!1,this._isABLogicStopped=!1,this._startAbTestLogic=function(){if(!T())return d.onReceived(DTDRemoteConfigReceiveResult.Failure),this._isABLogicStopped=!0,void A.debug("[A/B-Test Module] A/B tests can't be run on environments without access to permanent storage");p.init(),a.init(),h(),this._startConfigActualization(),this._tryActivateInvolvedExperiment()},this._startConfigActualization=function(){this._isConfigActualizationRunning=!0,0<w&&(this._configActualizationTask=new r("configActualizationTask",function(){this._stopConfigActualization(),this._isConfigActualizationRunning=!1,this._isABLogicStopped=!0,d.onReceived(DTDRemoteConfigReceiveResult.Failure),A.debug("[A/B-Test Module] ABTestLogic is stopped, because a config timer is expired")}.bind(this),w),this._configActualizationTask.start()),this._configFetchStartTime=(new Date).getTime(),this._configActualization().then(function(e){a.setExps(e.experiments),p.updateAudienceState(e.userProperties,!1,"ab_config"),h(),this._isConfigActualizationRunning&&(this._stopConfigActualization(),e&&"experiments"in e&&e.experiments.length?this._configVersion!==e.version&&(this._configVersion=e.version,d.onReceived(DTDRemoteConfigReceiveResult.Success),this._searchSuitableExperiment()):(d.onReceived(DTDRemoteConfigReceiveResult.Empty),A.debug("[A/B-Test Module] Failed to get A/B Test configuration"),setTimeout(function(){this._startConfigActualization()}.bind(this),6e4)))}.bind(this)).catch(function(e){})},this._isConfigActualizationTimerValid=function(){return 0===w||(new Date).getTime()-this._configFetchStartTime<=w},this._stopConfigActualization=function(){this._isConfigActualizationRunning=!1,this._configActualizationTask&&this._configActualizationTask.pause()},this._applyConfig=function(){this._isABLogicStopped||this._startCandidateExperiment()},this._resetConfig=function(){if(!this._isABLogicStopped)return this._involvedExperiment?(A.warning("[A/B-Test Module] Involved experiment "+this._involvedExperiment.id+" canceled!"),f[this._involvedExperiment.id]=DTDUserExperimentsMarks.TemporaryProcessed,s.experiments.clearInvolvedExperiment(),void this._stopAndRestart()):this._candidateExperiment?(A.warning("[A/B-Test Module] Involved experiment "+this._candidateExperiment.id+" canceled!"),f[this._candidateExperiment.id]=DTDUserExperimentsMarks.TemporaryProcessed,void this._stopAndRestart()):l.length?(C.forEach(function(e){f[e]=DTDUserExperimentsMarks.TemporaryProcessed},l),A.warning("[A/B-Test Module] Offer request aborted, suitable experiments "+l.join(",")+" canceled!"),void this._stopAndRestart()):void A.warning("[A/B-Test Module] Unable to reset configuration, no suitable experiments found")},this._onFocusLost=function(){this._isABLogicStopped||(this._candidateExperiment?(A.warning("[A/B-Test Module] Offer refused because application enter background"),f[this._candidateExperiment.id]=DTDUserExperimentsMarks.TemporaryProcessed,this._stopAndRestart(DTDRemoteConfigChangeResult.Failure)):l.length&&(C.forEach(function(e){f[e]=DTDUserExperimentsMarks.TemporaryProcessed},l),A.warning("[A/B-Test Module] Offer request aborted, suitable experiments "+l.join(",")+" canceled!"),this._stopAndRestart(DTDRemoteConfigChangeResult.Failure)))},this._startCandidateExperiment=function(){if(this._isActivationTaskRunning)if(this._candidateExperiment)if(this._isActiveExperiment)A.warning("[A/B-Test Module] Involved experiment is already active");else{if(!this._isActivationTimerValid())return A.error("[A/B-Test Module] Offer from devtodev not received within the allotted "+P/1e3+" seconds"),f[this._candidateExperiment.id]=DTDUserExperimentsMarks.Refused,A.debug("[A/B-Test Module] Suitable experiment "+this._candidateExperiment.id+" marked as refused"),this._candidateExperiment=null,void this._resetConfig();this._stopActivationTask(),s.experiments.setInvolvedExperiment(this._candidateExperiment),u.setActiveAbTest(this._candidateExperiment),u.unfreeze(),u.send(),this._isActivationTaskRunning=!1,this._isActiveExperiment=!0,this._involvedExperiment=this._candidateExperiment,this._candidateExperiment=null}else A.warning("[A/B-Test Module] Current user is not involved into the experiment")},this._runActivationTask=function(){0<P&&(this._activationTaskStartTime=(new Date).getTime(),this._startActivationTask=new r("startOfferTask",function(){this._candidateExperiment?(f[this._candidateExperiment.id]=DTDUserExperimentsMarks.TemporaryProcessed,A.warning("[A/B-Test Module] Involved experiment "+this._candidateExperiment.id+" was cancelled.\n\tReason: time is over")):0<l.length&&(C.forEach(function(e){f[e]=DTDUserExperimentsMarks.TemporaryProcessed},l),A.warning("[A/B-Test Module] Suitable experiments "+l.join(", ")+" were cancelled.\n\tReason: time is over")),this._stopAndRestart(DTDRemoteConfigChangeResult.Failure)}.bind(this),P),this._startActivationTask.start())},this._isActivationTimerValid=function(){return 0===this._groupDefinitionWaiting||(new Date).getTime()-this._activationTaskStartTime<=P},this._stopActivationTask=function(){this._startActivationTask&&this._startActivationTask.pause()},this._tryActivateInvolvedExperiment=function(){var e,t=this._checkInvolvedExperiment();!t||(e=a.getExpById(t[DTDUserExperimentsKeys.Id]))&&(this._stopConfigActualization(),d.onReceived(DTDRemoteConfigReceiveResult.Success),d.onPrepareToChange(),y(e,t[DTDUserExperimentsKeys.Group])?(this._hasSuitableExperiments=!0,u.freeze(0),this._isActivationTaskRunning=!0,this._runActivationTask(),this._candidateExperiment={id:t[DTDUserExperimentsKeys.Id],group:t[DTDUserExperimentsKeys.Group],completionDate:e[DTDExperimentStorage.completionDate]},d.onChanged(DTDRemoteConfigChangeResult.Success)):(f[t[DTDExperimentStorage.id]]=DTDUserExperimentsMarks.TemporaryProcessed,t="[A/B-Test Module] Involved experiment "+t[DTDExperimentStorage.id]+" was cancelled.\n\tReason: remote configuration intersection error",d.onChanged(DTDRemoteConfigChangeResult.Failure,t)))},this._changeUser=function(){T()?(this._isABLogicStopped=!1,this._isActiveExperiment=!1,this._candidateExperiment=null,this._isActivationTaskRunning=!1,u.removeActiveAbTest(),l=[],p.reInit(),a.init(),this._startConfigActualization(),!this._checkInvolvedExperiment()&&S&&0<Object.entries(S).length?(S={},d.onPrepareToChange(),d.onChanged(DTDRemoteConfigChangeResult.Success)):this._tryActivateInvolvedExperiment()):A.error("[A/B-Test Module] A/B tests can't be run on environments without access to permanent storage")},this._getAudienceStateInstance=function(){return p},this._checkInvolvedExperiment=function(){var e=s.experiments.getInvolvedExperiment();if(e){var t=a.getExpById(e[DTDUserExperimentsKeys.Id]);if(t&&t[DTDExperimentStorage.isTesting]&&!x)s.experiments.setRefusedExperiments(e[DTDUserExperimentsKeys.Id]),s.experiments.clearInvolvedExperiment(),t=null;else{if(t)return e;s.experiments.clearInvolvedExperiment()}}return!1},this._searchSuitableExperiment=function(r){if(r=r||{},!this._isABLogicStopped&&!this._candidateExperiment){var e,t,n,i=a.getAllExps();for(e in i)i.hasOwnProperty(e)&&(f[e]||s.experiments.checkRefusedExperiment(e)||((t=i[e])[DTDExperimentStorage.isTesting]&&l.push(t[DTDExperimentStorage.id]),t[DTDExperimentStorage.conditions]&&0<t[DTDExperimentStorage.conditions].length?(n=C.findObj(function(e){var t=e.code;if(b(e.type)){if(t===PL_CODE)return!_(e,s.getCard());if(t!==DI_CODE)return!!r&&!v(t,e,r);t=p.getAudienceState();return!m(e,t)}if("backend"===e.type)return!g(e)},t[DTDExperimentStorage.conditions]||[]),b(n)&&l.push(t[DTDExperimentStorage.id])):t[DTDExperimentStorage.conditions]&&0===t[DTDExperimentStorage.conditions].length&&l.push(t[DTDExperimentStorage.id])));0<l.length&&(A.info("[A/B-Test Module] Suitable experiment is found!"),this._isConfigActualizationTimerValid()&&this._isConfigActualizationRunning&&(d.onReceived(DTDRemoteConfigReceiveResult.Success),this._stopConfigActualization()),u.freeze(),this._hasSuitableExperiments=!0,d.onPrepareToChange(),this._runActivationTask(),this._startOfferRequest().then(function(e){var t,r;l=[],e&&e.id&&e.group?(A.info("[A/B-Test Module] Offer accept experiment id: "+e.id+" group: "+e.group),t=a.getExpById(e.id),this._candidateExperiment={id:e.id,group:e.group,completionDate:t[DTDExperimentStorage.completionDate]},y(t,e.group)?d.onChanged(DTDRemoteConfigChangeResult.Success):(f[e.id]=DTDUserExperimentsMarks.TemporaryProcessed,r="[A/B-Test Module] Involved experiment "+e.id+" was cancelled.\n\tReason: remote configuration intersection error",this._stopAndRestart(DTDRemoteConfigChangeResult.Failure,r))):(e&&e.id&&(f[e.id]=DTDUserExperimentsMarks.TemporaryProcessed,r="[A/B-Test Module] Involved experiment "+e.id+" was cancelled.\n\tReason: incomplete data"),this._stopAndRestart(DTDRemoteConfigChangeResult.Failure,r))}.bind(this)).catch(function(e){A.error(MES_PREFIX+e,{method:"startOfferRequest"}),this._stopAndRestart(DTDRemoteConfigChangeResult.Failure,e)}.bind(this)))}},this._stopAndRestart=function(e,t){c&&c.clear(),this._stopActivationTask(),S&&0<Object.entries(S).length&&(S={},A.info("[A/B-Test Module] Default parameters were applied")),e&&d.onChanged(e,t),u.unfreeze(),u.removeActiveAbTest(),this._isActiveExperiment=!1,this._hasSuitableExperiments=!1,this._involvedExperiment=null,this._candidateExperiment=null,l=[],this._searchSuitableExperiment()},this._configActualization=function(){var i=s.getId();return E.debug("[A/B-Test Module] Trying to get A/B Test configuration from server"),new Promise(function(r,n){a.sync(),new e("exp",t,s,o,function(e,t){t&&(A.error("[A/B-Test Module] Error while receiving A/B Test configuration from the server: "+t),n(t)),s.getId()!==i?(A.debug("[A/B-Test Module] In the process of receiving A/B Test configuration from the server, the user was changed. Request the configuration again."),this._startConfigActualization()):r(e)}.bind(this),function(e){e.body||(e.body={}),e.body.configVersion=this._configVersion}.bind(this)).start()}.bind(this))},this._startOfferRequest=function(){return this._isActivationTaskRunning=!0,new Promise(function(r,n){var i;A.debug("[A/B-Test Module] Trying get A/B Test offer from server"),l.length?(i=s.getId(),(c=new e("offer",t,s,o,function(e,t){return s.getId()!==i?(A.error("[A/B-Test Module] In the process of receiving offer from the server, the user was changed. Offer has been canceled."),void n()):t?(A.error("[A/B-Test Module] Error while receiving A/B Test offer from the server: "+t),void n()):e&&e.involvedExperiments&&0!==e.involvedExperiments.length?void r(e.involvedExperiments[0]):(A.error("[A/B-Test Module] Server refused to conduct the experiment"),s.experiments.setRefusedExperiments(l),void n())},function(e){e.body||(e.body={}),e.body.suitableExperiments=l})).start()):n()}.bind(this))};var h=function(e){for(var t in e=e||a.getAllExps())e[t][DTDExperimentStorage.completionDate]<=(new Date).getTime()&&a.removeExpById(t)},g=function(e){var r=new DTDVerificationCondition,n=p.getAudienceState();return!C.findObj(function(e,t){return"type"!==t&&!r.checkConditions(e,n[t])},e)},_=function(e,t){return!(!t||b(e[PL_PARAMS]))&&m(e[PL_PARAMS],t)},v=function(e,t,n){return!(!n||e!==n.code)&&!C.findObj(function(e,t){if("code"===t)return!1;var r=new DTDVerificationCondition;return!(t===PL_PARAMS?m(e,n[PL_PARAMS]):r.checkConditions(e,n[t]))},t)},m=function(e,n){var i=new DTDVerificationCondition;return!C.findObj(function(e,t){return"code"!==t&&!(r=t!==PL_PARAMS?i.checkConditions(e,n[t]):r);var r},e)},y=function(e,r){if(!(I&&0<Object.entries(I).length))return A.error("[A/B-Test Module] Default parameters is empty, the start of the experiment is impossible"),!1;var e=e[DTDExperimentStorage.parameters],n=!0;return C.forEach(function(e){var t=e.key,e=D(I[t],e.values[r]);null===e&&(A.error("[A/B-Test Module] Remote value for the key "+t+" can't be cast to default value type!"),n=!1),S[t]=e},e),n},D=function(e,t){if(void 0===e||void 0===t)return null;var r=t;if("boolean"==typeof e)switch(t){case"true":case"t":case"yes":case"y":r=!0;break;case"false":case"f":case"no":case"n":case"":r=!1}if("bigint"==typeof e)try{return BigInt(r)}catch(e){return A.error("[A/B-Test Module] Remote value can't be cast to BigInt"),null}switch(_typeof(e)){case"boolean":return Boolean(r);case"string":return String(r);case"number":return isNaN(r)?(A.error("[A/B-Test Module] Remote value can't be cast to Number"),null):Number(r);default:return null}},T=function(){return n.storageType!==StorageTypes.Memory};Object.defineProperty(this,"audienceState",{get:function(){return this._getAudienceStateInstance()}}),Object.defineProperty(this,"isABLogicStopped",{get:function(){return this._isABLogicStopped}})}return r.prototype.startAbTestLogic=function(){this._startAbTestLogic()},r.prototype.applyConfig=function(){this._applyConfig()},r.prototype.getIsActiveExperiment=function(){return this._isActiveExperiment},r.prototype.hasSuitableExperiments=function(){return this._hasSuitableExperiments},r.prototype.changeUser=function(){this._changeUser()},r.prototype.applyConfig=function(){this._applyConfig()},r.prototype.resetConfig=function(){this._resetConfig()},r.prototype.searchSuitableExperiment=function(e){this._searchSuitableExperiment(e)},r.prototype.onFocusLost=function(e){this._onFocusLost()},Object.defineProperty(r,"remoteConfigWaiting",{set:function(e){t.getIsInitialized()?A.warning('[A/B-Test Module] "remoteConfigWaiting" can\'t be changed after SDK has been initialized'):(e=Number(e),isNaN(e)?A.warning('[A/B-Test Module] "remoteConfigWaiting" must be a number'):w=1e3*e)},get:function(){return w?w/1e3:null}}),Object.defineProperty(r,"groupDefinitionWaiting",{set:function(e){t.getIsInitialized()?A.warning('[A/B-Test Module] "groupDefinitionWaiting" can\'t be changed after SDK has been initialized'):(e=Number(e),isNaN(e)?A.warning('[A/B-Test Module] "groupDefinitionWaiting" must be a number'):P=1e3*e)},get:function(){return P?P/1e3:null}}),Object.defineProperty(r,"defaults",{set:function(e){I=e},get:function(){return new DTDRemoteConfigCollection(I,DTDRemoteConfigSource.Defaults)}}),Object.defineProperty(r,"config",{get:function(){return S&&0<Object.entries(S).length?new DTDRemoteConfigCollection(S,DTDRemoteConfigSource.Remote):new DTDRemoteConfigCollection(I,DTDRemoteConfigSource.Defaults)},set:function(){}}),r.cacheTestExperiment=function(){t.getIsInitialized()?A.warning("[A/B-Test Module] CacheTestExperiment can't be called after SDK has been initialized"):x=!0},r};function AudienceState(r,n,i){var s={};this._init=function(e){for(param in s={},AudienceUserStorageMap){var t=n.getAttr(AudienceUserStorageMap[param]);t&&(s[param]=t)}s.displayDiagonal=i.getDisplayResolution(),s.language=i.getLanguage(),s.lifetime=s.created?(new Date).getTime()-s.created:0},this._getAudienceState=function(){return s.lifetime=s.created?(new Date).getTime()-s.created:0,s},this._updateAudienceState=function(e,t){if(t=t||!1,!r.isABLogicStopped){for(param in AudienceStateKeys)param in e&&e[param]&&(s[param]=e[param]);t&&r.searchSuitableExperiment()}}}AudienceState.prototype.updateAudienceState=function(e,t,r){return this._updateAudienceState(e,t)},AudienceState.prototype.getAudienceState=function(){return this._getAudienceState()},AudienceState.prototype.init=function(){return this._init()},AudienceState.prototype.reInit=function(){return this._init()};var SchedulerIntervel=function(n){function e(e,t,r){this._delay=r,this._callback=t,this._key=e,this._status=0,this._abort=function(){0!==this._status&&n.removeTaskByKey(this._key)},this._run=function(){var e=new DTDTimeManagerTask(this._onResponse.bind(this),this._delay,this._key);n.addTask(e),this._status=1},this._onResponse=function(){this._run(),this._callback()}}return e.prototype={start:function(){0==this._status&&this._run()},reset:function(){this._abort(),this._status=0,this.start()},pause:function(){this._abort(),this._status=0},setDelay:function(e){this._delay=e,this.reset()}},e},DTDCookies=function(){function e(){}var s={};return e.prototype.isAvailable=function(){return void 0!==window.navigator&&void 0!==window.navigator.cookieEnabled?window.navigator.cookieEnabled:(window.document.cookie="testcookie=test; max-age=10000",1!==(s=window.document.cookie).indexOf("testcookie=test")&&(window.document.cookie="testcookie=test; max-age=1",!0))},e.prototype.setItem=function(e,t){var r=new Date;r.setTime(Date.now()+31536e7),window.document.cookie=e+"="+t+"; expires="+r.toGMTString()+"; path=/"},e.prototype.getItem=function(e){var t,r,n,i=null;for(s=window.document.cookie.split(";"),t=0;t<s.length;t++)n=(r=s[t]).indexOf("="),DTDHelpers.trimmer(r.slice(0,n))===e&&(i=r.slice(n+1));return i},e.prototype.removeItem=function(e){window.document.cookie=e+"=; expires='Thu, 01 Jan 1970 00:00:00 GMT'; path=/"},e}(),DTDLocalStorage=function(){function e(){}return e.prototype.isAvailable=function(){var t=!1;try{"localStorage"in window&&null!==window.localStorage&&(window.localStorage.setItem("test","yes"),window.localStorage.removeItem("test"),t=!0)}catch(e){t=!1}return t},e.prototype.setItem=function(e,t){window.localStorage.setItem(e,t)},e.prototype.getItem=function(e){e=window.localStorage.getItem(e);return e=void 0===e?null:e},e.prototype.removeItem=function(e){window.localStorage.removeItem(e)},e}(),DTDMemoryStorage=function(){var r={};function e(){}return e.prototype.setItem=function(e,t){r[e]=t},e.prototype.getItem=function(e){e=r[e];return e=void 0===e?null:e},e.prototype.removeItem=function(e){delete r[e]},e}(),BaseAdapter=function(o){"use strict";var e,t=DTDHelpers;return(e=function(e,t){function r(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=e.join("_");return e=t?Base64.encode(e):e}var n=t,i=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).base64||!1,s=e;this._get=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=r([s,o],!1);return null===n.getItem(t)?(t=r([s,o]),n.getItem(t)):n.removeItem(t),function(e){return null!==e&&(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&Base64.isEncode(e)&&(e=Base64.decode(e)),JSON.parse(e)}(n.getItem(t),i)||e},this._set=function(e){var t=r([s,o]);n.setItem(t,function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e=JSON.stringify(e),e=t?Base64.encode(e):e}(e,i))}}).prototype.getByPrimaryId=function(e){return this._get()[e]},e.prototype.removeByPrimaryId=function(e){var t=this._get();delete t[e],this._set(t)},e.prototype.get=function(){return this._get()},e.prototype.set=function(e){return this._set(e)},e.prototype.findPrimaryIdByCondition=function(e){var r,n=this._get();for(r in n)if(n.hasOwnProperty(r)&&!t.findObj(function(e,t){return n[r][t]!=e},e))return r;return null},e},ExperimentsAdapter=function(){"use strict";function e(e,t){r.call(this,e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}var r=BaseAdapter("experiments");return(e.prototype=Object.create(r.prototype)).constructor=e}(),AppModel=function(){function e(r){var s={};this._getAttribute=function(e,t){var r=(e=o.isArray(e)?e:[e]).length;if(r){for(var n=s,i=0;i<r&&n;++i){if(void 0===n[e[i]]){n=t;break}n=n[e[i]]}return n}},this._init=function(){s=r.get(),null===this._getAttribute(n.UUID,null)&&(s[n.UUID]=t.generateUUID(),this._setAttrs(s))},this._setAttr=function(e,t){this._setAttrs(_defineProperty({},e,t))},this._setAttrs=function(e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);r.set(s)},this._init()}var n=DTDAppStorage,t=DTDHelpers,o=DTDTypeValidator;return e.prototype={isMigration:function(){return this._getAttribute(n.IsMigration,0)},addTransactionId:function(e){var t=this.getTransactionIds();o.isNullOrEmpty(e)||(t.push(e),this._setAttr(n.TransactionIds,t))},setAppVer:function(e){this._setAttr(n.AppVersion,e)},setConfigSdk:function(e){this._setAttr(n.Config,e)},isAllExcluded:function(){return this._getAttribute(n.Config+".exclude.all",!1)},getEventsExcluded:function(){return this._getAttribute(n.Config+".exclude.events",{})},getAppVer:function(){var e=[n.AppVersion];return this._getAttribute(e)},getMaxEventParams:function(){var e=[n.Config,"eventParamsCount"];return this._getAttribute(e,20)},getTransactionIds:function(){var e=[n.TransactionIds];return this._getAttribute(e,[])},getSessionTimeout:function(){var e=[n.Config,"sessionTimeout"];return this._getAttribute(e,6e5)},getCountForRequest:function(){var e=[n.Config,"countForRequest"];return this._getAttribute(e,10)},getAbTimeout:function(){var e=[n.Config,"abTestStartTimeout"];return this._getAttribute(e,3e4)},getExcludeVer:function(){var e=[n.Config,"exclude","version"];return this._getAttribute(e,null)},sync:function(){this._init()},getTimeForRequest:function(){var e=[n.Config,"timeForRequest"];return this._getAttribute(e,12e4)},getAliveTimeout:function(){var e=[n.Config,"aliveTimeout"];return this._getAttribute(e,3e5)},getCATimeout:function(){var e=[n.Config,"currencyAggregationTimeout"];return this._getAttribute(e,36e4)},getUUID:function(){var e=[n.UUID];return this._getAttribute(e)},setAttrs:function(e){return this._setAttrs(e)}},e}(),AppsModel=function(){"use strict";function e(e,t,r){n.call(this,e,t,r)}var n=BaseAdapter("app");return(e.prototype=Object.create(n.prototype)).constructor=e}(),EventsModel=function(){"use strict";function e(e,t,r){n.call(this,e,t,r)}var n=BaseAdapter("events"),i=DTDEventStorage;return((e.prototype=Object.create(n.prototype)).constructor=e).prototype.get=function(){return this._get([])},e.prototype.add=function(e){var t=this._get([]),r=1;0!==t.length&&(r=t[t.length-1][i.PrimaryId]+1),e[i.PrimaryId]=r,t.push(e),this._set(t)},e.prototype.removeByPrimaryIds=function(e){for(var t=this._get([]),r=[],n=t.length-1;0<=n;n--)void 0===e[t[n][i.PrimaryId]]&&r.unshift(t[n]);this._set(r)},e.prototype.removeByPrimaryUserId=function(e){for(var t=this._get([]),r=[],n=t.length-1;0<=n;n--)t[n][i.PrimaryUserId]!==e&&r.unshift(t[n]);this._set(r)},e.prototype.getCountEventsByUser=function(e){for(var t=this._get([]),r=0,n=t.length-1;0<=n;n--)t[n][i.PrimaryUserId]===e&&r++;return r},e.prototype.getEventsByUser=function(e){for(var t=this._get([]),r=[],n=t.length-1;0<=n;n--)t[n][i.PrimaryUserId]===e&&r.unshift(t[n]);return r},e}();function ExperimentsModel(e){var i=e,s={};this._getExp=function(e){return void 0!==s[e]?s[e]:1<arguments.length&&void 0!==arguments[1]?arguments[1]:null},this._getAllExps=function(){return s},this._clear=function(){s={}},this._setExp=function(e,t){s[e]=t,i.set(s)},this._setExps=function(e){if(e&&0!==e.length){for(var t=0;t<e.length;t++){var r,n=String(e[t].id);for(r in s[n]={},e[t])e[t].hasOwnProperty(r)&&void 0!==DTDExperimentStorage[r]&&(s[n][DTDExperimentStorage[r]]=e[t][r])}i.set(s)}},this._removeExpById=function(e){s&&s[e]&&delete s[e],i.set(s)},this._get=function(){return s},this._sync=function(){s=i.get()},this._init=function(){s=i.get()},this._init()}ExperimentsModel.prototype={init:function(){this._init()},sync:function(){this._sync()},setExps:function(e){return this._setExps(e)},getExpById:function(e,t){return this._getExp(e,t)},getAllExps:function(e){return this._getAllExps()},removeExpById:function(e){this._removeExpById(e)}};var UserModel=function(){function e(r){var n,i,o={};this._getAttr=function(e,t){if(!e&&!t)return null;var r="string"==typeof e?[e]:e,n=r.length;if(n){for(var i=o,s=0;s<n&&i;++s){if(void 0===i[r[s]]){i=t;break}i=i[r[s]]}return i}},this._getPrimaryId=function(){return n},this._sync=function(){o=r.getByPrimaryId(n)},this._clearBackendId=function(e){return e[s.DevtodevId]=null,e[s.CrossPlatformDevtodevId]=null,e[s.DevtodevIdTimestamp]=null,e},this._replaceUserId=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=o[s.UserId],n={};r!==e&&null!==e&&(n[s.PrevUserId]=r,n[s.UserId]=e,n[s.PrevDeviceId]=r,n[s.DeviceId]=e,n[s.IsDefault]=t?1:0,n=this._clearBackendId(n)),this._setAttrs(n),i=new UserExperiments(o,this._setAttr.bind(this))},this._create=function(e,t){var r;n=a.generateUUID(),o={},this._setAttrs((_defineProperty(r={},s.RegistrationDate,Date.now()),_defineProperty(r,s.UserId,e),_defineProperty(r,s.IsDefault,t?1:0),_defineProperty(r,s.DeviceId,e),r)),i=new UserExperiments(o,this._setAttr.bind(this)),this._sync()},this._init=function(e){n=e,this._sync(),this._setAttrs(this._clearBackendId({})),i=new UserExperiments(o,this._setAttr.bind(this))},this._setAttr=function(e,t){this._setAttrs(_defineProperty({},e,t))},this._setAttrs=function(e){for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t]);o[s.LastActive]=Date.now(),r.setByPrimaryId(n,o)},this._removeAttribute=function(e){delete o[e],r.setByPrimaryId(n,o),this._sync()},Object.defineProperty(this,"experiments",{get:function(){return i}})}var s=DTDUserStorage,a=DTDHelpers,o=DTDTypeValidator;return e.prototype={sync:function(){this._sync()},getAttr:function(e){return this._getAttr(s[e])},replaceUserId:function(e){this._replaceUserId(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0)},create:function(e,t){this._create(e,t)},init:function(e){this._init(e)},setAttrs:function(e){return this._setAttrs(e)},setDefault:function(e){return this._setAttr(s.IsDefault,e?1:0)},isDefault:function(){return this._getAttr(s.IsDefault,0)},isDeviceCounting:function(){return this._getAttr(s.DeviceCounting,0)},setDeviceCounting:function(e){return this._setAttr(s.DeviceCounting,e?1:0)},getRg:function(){return this._getAttr(s.RegistrationDate,null)},getLevel:function(){return this._getAttr(s.CurrentLevel,1)},setLevel:function(e){this._setAttr(s.CurrentLevel,e)},getPrimaryId:function(){return this._getPrimaryId()},getId:function(){return this._getAttr(s.UserId)},getDeviceId:function(){return this._getAttr(s.DeviceId)||this._getAttr(s.UserId)},getPrevDeviceId:function(){return this._getAttr(s.PrevDeviceId)},getSessionId:function(){return this._getAttr(s.SessionStarted)},resumeSession:function(){var e=Date.now();this._setAttr(s.LastForeground,e)},getSessionLength:function(){return this._getAttr(s.SessionLength,0)},newSession:function(e){var t;this._setAttrs((_defineProperty(t={},s.SessionStarted,e),_defineProperty(t,s.LastForeground,e),_defineProperty(t,s.SessionLength,0),t))},incrementSession:function(){var e,t=Date.now(),r=Math.floor((t-this.getLastForeground())/1e3),n=this.getSessionLength();this._setAttrs((_defineProperty(e={},s.SessionLength,n+r),_defineProperty(e,s.LastForeground,t),e))},clearSessionLength:function(){this._setAttr(s.SessionLength,0)},getLastForeground:function(){return this._getAttr(s.LastForeground,0)},getPrevUserId:function(){return this._getAttr(s.PrevUserId)},setAttr:function(e,t){return this._setAttr(s[e],t)},getD2dId:function(){return this._getAttr(s.DevtodevId,null)},getD2dCrossId:function(){return this._getAttr(s.CrossPlatformDevtodevId,null)},getD2dTm:function(){return this._getAttr(s.DevtodevIdTimestamp,null)},clearBackendId:function(){this._setAttrs(this._clearBackendId({}))},haveBackendId:function(){return null!==this._getAttr(s.DevtodevIdTimestamp,null)},setIsUserPay:function(){this._setAttr(s.IsPayingUser,1)},canBalanceSentTime:function(){var e=this._getAttr(s.TimeSentBalance,0);return(new Date).getTime()>=e+144e5},refreshBalanceSentTime:function(){this._setAttr(s.TimeSentBalance,(new Date).getTime())},turnOffRef:function(){this._setAttr(s.ReferralSatus,0)},isTurnOnRef:function(){return this._getAttr(s.ReferralSatus,1)},getTutorialSteps:function(){return this._getAttr(s.TutorialSteps,[])},insertTutorStep:function(e){var t=this._getAttr(s.TutorialSteps,[]);t.push(e),this._setAttr(s.TutorialSteps,t)},setCA:function(e){var t=e[CA_SOURCE],r=AccrualTypes[e[CA_TYPE]],n=e[CA_CURRENCY_AMOUNT],i=e[CA_CURRENCY_NAME],e=this.getCA();o.isNullOrEmpty(e[r])&&(e[r]={}),o.isNullOrEmpty(e[r][t])&&(e[r][t]={}),o.isNullOrEmpty(e[r][t][i])&&(e[r][t][i]=0),e[r][t][i]+=n,this._setAttr(s.CurrencyAccrual,e)},getCA:function(){return this._getAttr(s.CurrencyAccrual,{})},clearCA:function(){this._removeAttribute(s.CurrencyAccrual)},isTracking:function(){return!!this._getAttr(s.Tracking,1)},setTracking:function(e){this._setAttr(s.Tracking,e?1:0)},getCard:function(){return this._getAttr(s.Profile,{})},getCardField:function(e){return this._getAttr([s.Profile,e],null)},clearCard:function(){this._removeAttribute(s.Profile)},clearCardChanges:function(){this._removeAttribute(s.UpdateProfile)},unsetCardField:function(e){var t=this.getCard(),r=this.getCardChanges();delete t[e],r[e]=null,this._setAttrs((_defineProperty(e={},s.UpdateProfile,r),_defineProperty(e,s.Profile,t),e))},setCardField:function(e,t){var r=this.getCard(),n=this.getCardChanges();r[e]=t,n[e]=t,this._setAttrs((_defineProperty(t={},s.UpdateProfile,n),_defineProperty(t,s.Profile,r),t))},isPayingUser:function(){return this._getAttr(s.IsPayingUser,!1)},getCardChanges:function(){return this._getAttr(s.UpdateProfile,{})}},e}(),UsersModel=function(){"use strict";function e(e,t){r.call(this,e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}var i=DTDUserStorage,r=BaseAdapter("users");return((e.prototype=Object.create(r.prototype)).constructor=e).prototype.setByPrimaryId=function(e,t){var r=this._get();void 0===r[e]&&(r[e]={}),r[e]=t,r[e][i.LastActive]=Date.now(),this._set(r)},e.prototype.lastActive=function(){var e,t=this._get(),r=null,n=0;for(e in t)t.hasOwnProperty(e)&&"pId"!==e&&(null==r&&(r=e),t[e][i.LastActive]>n&&(n=t[r=e][i.LastActive]));return r},e}(),UserExperiments=function(){function e(o,a){this._getInvolvedExperiment=function(){var e=o[DTDUserStorage.UserExperiment];if(e&&e[DTDUserExperimentStorage.ActiveExperiment]){var t=e[DTDUserExperimentStorage.ActiveExperiment],e={};return _defineProperty(e,DTDUserExperimentsKeys.Id,t[DTDUserExperimentsKeys.Id]),_defineProperty(e,DTDUserExperimentsKeys.Group,t[DTDUserExperimentsKeys.Group]),e}return null},this._setInvolvedExperiment=function(e){var t,r;e&&(o[DTDUserStorage.UserExperiment]&&o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.ActiveExperiment]||(o[DTDUserStorage.UserExperiment]=(_defineProperty(r={},DTDUserExperimentStorage.ActiveExperiment,null),_defineProperty(r,DTDUserExperimentStorage.RefusedExperiments,[]),r)),_defineProperty(t={},DTDUserExperimentsKeys.Id,e.id),_defineProperty(t,DTDUserExperimentsKeys.Group,e.group),r=o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.RefusedExperiments],a(DTDUserStorage.UserExperiment,(_defineProperty(e={},DTDUserExperimentStorage.ActiveExperiment,t),_defineProperty(e,DTDUserExperimentStorage.RefusedExperiments,r),e)))},this._clearInvolvedExperiment=function(e){var t;o[DTDUserStorage.UserExperiment]&&o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.ActiveExperiment]||(o[DTDUserStorage.UserExperiment]=(_defineProperty(t={},DTDUserExperimentStorage.ActiveExperiment,{}),_defineProperty(t,DTDUserExperimentStorage.RefusedExperiments,[]),t));var r=o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.RefusedExperiments];a(DTDUserStorage.UserExperiment,(_defineProperty(t={},DTDUserExperimentStorage.ActiveExperiment,null),_defineProperty(t,DTDUserExperimentStorage.RefusedExperiments,r),t))},this._getRefusedExperiments=function(){var e=o[DTDUserStorage.UserExperiment];return e&&e[DTDUserExperimentStorage.RefusedExperiments]?e[DTDUserExperimentStorage.RefusedExperiments]:[]},this._setRefusedExperiments=function(e){if(e){Array.isArray(e)||(e=[e]);for(var t,r=[],n=0;n<e.length;n++)0<=this._getRefusedExperiments().indexOf(Number(e[n]))||r.push(Number(e[n]));o[DTDUserStorage.UserExperiment]&&o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.ActiveExperiment]||(o[DTDUserStorage.UserExperiment]=(_defineProperty(t={},DTDUserExperimentStorage.ActiveExperiment,null),_defineProperty(t,DTDUserExperimentStorage.RefusedExperiments,[]),t));var i=o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.ActiveExperiment],s=(s=o[DTDUserStorage.UserExperiment][DTDUserExperimentStorage.RefusedExperiments]).concat(r);a(DTDUserStorage.UserExperiment,(_defineProperty(t={},DTDUserExperimentStorage.ActiveExperiment,i),_defineProperty(t,DTDUserExperimentStorage.RefusedExperiments,s),t))}}}return e.prototype={getInvolvedExperiment:function(){return this._getInvolvedExperiment()},setInvolvedExperiment:function(e){this._setInvolvedExperiment(e)},clearInvolvedExperiment:function(){return this._clearInvolvedExperiment()},getRefusedExperiments:function(){return this._getRefusedExperiments()},checkRefusedExperiment:function(e){return!(!e||Number.isNaN(Number(e)))&&0<=this._getRefusedExperiments().indexOf(Number(e))},setRefusedExperiments:function(e){this._setRefusedExperiments(e)}},e}(),StorageManager=function(){function e(){var r,n={};_logger=DTDLogger.getInstance();var e,t=new DTDLocalStorage;e=t.isAvailable()?(r=t,StorageTypes.LocalStorage):(_logger.info("Access to local storage not available"),(t=new DTDCookies).isAvailable()?(r=t,StorageTypes.Cookies):(_logger.info("Access to cookies not available"),r=new DTDMemoryStorage,StorageTypes.Memory)),this._init=function(e,t){n.app=new AppsModel(e,r,t),n.user=new UsersModel(e,r,t),n.event=new EventsModel(e,r),n.experiments=new ExperimentsAdapter(e,r,t)},this._getAdaper=function(e){return n[e]},this._isAvailable=function(){return r.isAvailable()},Object.defineProperty(this,"storageType",{get:function(){return e}})}return e.prototype.init=function(e){this._init(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})},e.prototype.getApp=function(e){return this._getAdaper("app")},e.prototype.getUser=function(e){return this._getAdaper("user")},e.prototype.getEvent=function(e){return this._getAdaper("event")},e.prototype.getExperiments=function(e){return this._getAdaper("experiments")},e.prototype.isAvailable=function(){return this._isAvailable()},e}(),DTDVerificationCondition=function(){var n="NOT IN",o=">",a="<",i="!=",u=">=",c="<=",i="!=",t=DTDHelpers,d=DTDTypeValidator,s={},r=[];function e(){}function l(e,r){return void 0!==r&&(d.isObject(e)?!t.findObj(function(e,t){switch(t){case"IN":case n:return!function(e,t,r){if(!d.isArray(t))return!1;if(!d.isString(r)&&!d.isInteger(r))return!1;r=-1<t.indexOf(r);return e===n?!r:r}(t,e,r);case"==":case i:return!function(e,t,r){r=d.isEqual(t,r);return e===i?!r:r}(t,e,r);case o:case a:case u:case c:return!function(e,t,r){if(_typeof(t)===_typeof(r)){var n=parseFloat(t),i=parseFloat(r);if(d.isInteger(i))switch(e){case u:return n<=i;case o:return n<i;case a:return i<n;case c:return i<=n}else if(d.isString(r)){var s=r.localeCompare(t);switch(e){case u:case o:return 0<=s;case a:return s<0;case c:return s<=0}}}return!1}(t,e,r);default:return!1}},e):d.isEqual(e,r))}e.prototype.checkConditions=function(e,t){var r=JSON.stringify({condition:e,data:t});if(s.hasOwnProperty(r))return s[r];t=l(e,t);return f(r,t),t};var f=function(e,t){return s.hasOwnProperty(e)||r.push(e),s[e]=t,200<r.length&&(e=r.shift(),delete s[e]),t};return e}(),DTDTimeManager=function(){function e(){var e,t=null,s={},o=[],r=0;function n(){return e.apply(this,arguments)}_clearAllTask=function(){s={},o=[]},_getNextTask=function(){if(0!==o.length&&o[0]<=parseInt(Date.now()/1e3)){var e=o[0];if(void 0!==s[e]){var t=s[e].shift();return 0===s[e].length&&(o.shift(),delete s[e]),t}}return null},_runTimer=(e=function(){clearTimeout(t);for(var e=_getNextTask();e;)e.run(),e=_getNextTask();t=setTimeout(_runTimer,1e3)},n.toString=function(){return e.toString()},n),this._addTask=function(e,t){-1===o.indexOf(e)&&(o.push(e),o.sort(function(e,t){return parseFloat(e)-parseFloat(t)}),s[e]=[]),s[e].push(t)},this._hasTask=function(e){for(var t=o.length-1;0<=t;t--)for(var r=s[o[t]].length-1;0<=r;r--)if(s[o[t]][r].id==e)return!0;return!1},this._removeTaskByKey=function(e){for(var t={},r=[],n=o.length-1;0<=n;n--){t[o[n]]=[];for(var i=s[o[n]].length-1;0<=i;i--)s[o[n]][i].id!=e&&t[o[n]].unshift(s[o[n]][i]);0==t[o[n]].length?delete t[o[n]]:r.unshift(o[n])}o=r,s=t},this._start=function(){0==r&&(r=1,t=setTimeout(_runTimer,0))},this._stop=function(){r=0,clearTimeout(t),_clearAllTask()},this.pause=function(){r=0,clearTimeout(t)}}return e.prototype.start=function(){this._start()},e.prototype.stop=function(){this._stop()},e.prototype.pause=function(){this._pause()},e.prototype.performTimedTask=function(e){this._addTask(e.deadline,e)},e.prototype.addTask=function(e){this._addTask(e.deadline,e)},e.prototype.hasTask=function(e){this._hasTask(e)},e.prototype.removeTaskByKey=function(e){this._removeTaskByKey(e)},e.prototype.ignoreTimer=function(e){},e}(),DTDTimeManagerTask=function(){function e(e,t,r){var n=Date.now();n+=t,this.deadline=parseInt(n/1e3),this._callback=e,this.id=r||this.deadline}return e.prototype.run=function(){this._callback()},e}(),EventListeners=function(){function o(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function a(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent("on"+t,r)}function u(){return window.document.fullscreenElement||window.document.mozFullscreenElement||window.document.webkitFullscreenElement}var c=DTDLogger.getInstance();function e(e,t,r){function n(){c.debug("Event onBlur"),e()}function i(){c.debug("Event onFocus"),t()}function s(e){e?(a(window,"blur",n),a(window,"focus",i),c.debug("Event full screen")):(o(window,"blur",n),o(window,"focus",i),c.debug("Event normal screen")),r(e)}this._start=function(){o(window.document,"fullscreenchange",function(){s(u())}),o(window.document,"mozfullscreenchange",function(){s(u())}),o(window.document,"webkitfullscreenchange",function(){s(u())}),o(window.document,"msfullscreenchange",function(){s(u())}),o(window,"blur",n),o(window,"focus",i)}}return e.prototype.start=function(){this._start()},e}(),DTDClient=function(){"use strict";function r(){return!!y.isAllExcluded()&&(M.info("All events are excluded by project configuration"),!0)}function a(){var e=(_defineProperty(e={},DI_OS_VER,Y.getOsVer()),_defineProperty(e,DI_DISPLAY_RESOLUTION,Y.getDisplayResolution()),_defineProperty(e,DI_OS,Y.getOsName()),_defineProperty(e,DI_UUID,y.getUUID()),_defineProperty(e,DI_UA,Y.getUA()),_defineProperty(e,DI_TZ,Y.getTzOffset()),e);return Z(DI_CODE,e)}function n(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?E.getCard():E.getCardChanges();if(!U.isNullOrEmpty(e)){e=_defineProperty({},PL_PARAMS,e);return E.clearCardChanges(),Z(PL_CODE,e)}}function i(e){e={timestamp:Date.now(),cheater:e},Z("ch",e)}function s(e){e={timestamp:Date.now(),tester:e},Z("tstr",e)}function e(){if(E.isTracking()){for(var e in S&&S.hasSuitableExperiments()&&!S.getIsActiveExperiment()&&S.onFocusLost(),E.incrementSession(),L.pause(),Q(),te(),q)q[e].pause();I.pause(),C.pause(),b.stop()}}function t(e){e&&$()}function d(){E.incrementSession()}function l(){Z(AL_CODE)}function f(){M.debug("Currency accrual timer tick"),K()}function p(){Q(),re()}function h(e,t){V.validLevel(e,t)&&(E.getLevel()!=t?(K(),E.setLevel(t),S&&S.audienceState.updateAudienceState(_defineProperty({},AudienceStateKeys.level,t),!1,"level"),M.info('Level "{level}" is set successfully for user {user}',{level:E.getLevel(),user:E.getId()})):M.info("The current level is equal to the new level [{level}]",{level:t}))}function g(e,t){V.validAppVer(e,t)&&(y.setAppVer(t),M.info('App version "{version}" is set successfully',{version:y.getAppVer()}))}function _(){for(var e in a(),E.isTurnOnRef()&&(function(){if(E.isTurnOnRef())try{var r,e={utm_source:UTM_SOURCE,utm_medium:UTM_MEDIUM,utm_content:UTM_CONTENT,utm_campaign:UTM_CAMPAIGN,utm_term:UTM_TERM},n=!0,i={},s=window.document.URL;x.forEachObj(function(e,t){r=x.parseUrlParams(s,t),U.isNullOrEmpty(r)||(i[e]=r,n=!1)},e),n||Z(RF_CODE,i)}catch(e){}}(),K()),ne(),q)q[e].reset();te()}function u(e){if(!B)throw"The SDK is not initialized yet!";return B}function o(e){var t=E.isTracking();e!==t&&(t?(L.start(),C.clear(),C.start(),I.clear(),I.start()):L.stop())}function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],n=E.isTracking(),i="User '{newName}' has been activated";z.clear(),U.isNullOrEmpty(e)?(i="User '{newName}' has been created",t=r?y.getUUID():t,E.create(t,r)):(i="User '{newName}' has been activated",E.init(e)),M.info(i,{newName:E.getId()}),o(n),E.isTracking()&&(S&&S.changeUser(),_())}function v(){T=new EventListeners(e,$,t)}var m,y,D,T,E,A,C,b,I,S,w=null,P=DTDEventParams,x=DTDHelpers,U=DTDTypeValidator,k=DTDEventStorage,R=DTDDefaultsFields,O=DTDUserStorage,N=new DTDApi,L=new DTDTimeManager,B=!1,M=DTDLogger.getInstance(),V=new ValidatorRules,z=new ManagerProgression,F=ConfigManager(L,N),j=EventQueueManager(L,N),H=SchedulerIntervel(L),q={},Y=DTDSystemManager.getInstance(),K=function(){var e=E.getCA();U.isNullOrEmpty(e)||Z(CA_CODE,e)},W=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();e===SS_CODE&&(r=E.getSessionId()),t[P.Timestamp]=r;_defineProperty(r={},k.PrimaryUserId,E.getPrimaryId()),_defineProperty(r,k.language,Y.getLanguage()),_defineProperty(r,k.appVersion,y.getAppVer()),_defineProperty(r,k.sdkVersion,Y.getSdkVer()),_defineProperty(r,k.sdkCodeVersion,Y.getSdkVerCode()),_defineProperty(r,k.engine,Y.getEngine()),_defineProperty(r,k.Code,e);return(r=x.filterObj(function(e,t){return!U.isNullOrEmpty(e)},r))[k.Params]=t,r},G=function(e,t){switch(e){case LU_CODE:E.setLevel(t[LU_LEVEL]);break;case TR_CODE:E.insertTutorStep(t[TR_STEP]);break;case RP_CODE:y.addTransactionId(t[RP_ORDER_ID]),E.setIsUserPay(!0),S&&S.audienceState.updateAudienceState(_defineProperty({},AudienceStateKeys.payingUser,!0),!0,"RP_CODE");break;case CB_CODE:E.refreshBalanceSentTime()}},X=function(e,t){var r=E.isTracking();switch(t[P.Code]=e,U.isNullOrEmpty(z.getLocation())||-1!==[DI_CODE,PL_CODE,RF_CODE,PE_CODE,AL_CODE,CA_CODE,CB_CODE,"tstr","ch"].indexOf(e)||(t.inProgress=[z.getLocation()]),-1===[DI_CODE,TS_CODE,LU_CODE,AL_CODE,RF_CODE,ADRV_CODE].indexOf(e)&&(t[P.Level]=E.getLevel()),-1===[DI_CODE,TS_CODE,SS_CODE,AL_CODE].indexOf(e)&&(t[P.SessionId]=E.getSessionId()),e){case TS_CODE:t[TS_ALLOWED]||(D.removeByPrimaryUserId(E.getPrimaryId()),E.clearCA(),E.clearBackendId(),Q(),n()),E.setTracking(t[TS_ALLOWED]);break;case LU_CODE:r&&(K(),S&&S.audienceState.updateAudienceState(_defineProperty({},AudienceStateKeys.level,t[LU_LEVEL]),!1,"levelUp"));break;case CA_CODE:r&&E.clearCA();break;case RF_CODE:r&&E.turnOffRef()}S&&!S.getIsActiveExperiment()&&-1===[AL_CODE].indexOf(e)&&S.searchSuitableExperiment(t)},J=function(e,t){if(!r())return e!==RF_CODE||E.isTurnOnRef()?e!==CB_CODE||E.canBalanceSentTime()?e===LU_CODE&&E.getLevel()==t[LU_LEVEL]?(M.info("The current level is equal to the new level [{level}]",{level:t[LU_LEVEL]}),!1):!V.isExcluded(y.getEventsExcluded(),e,t):(M.info("The CurrentBalance event has already been sent less than 4 hours ago."),!1):(M.info("Referral data of the current user is already sent"),!1)},Z=function(e){var t=V.validEvent(e,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:"system",{steps:E.getTutorialSteps(),trIds:y.getTransactionIds(),maxCeParams:y.getMaxEventParams()});if(e!=TS_CODE&&!E.isTracking())return M.info("Event [{code}] not created. Tracking is Disabled",{code:e}),void G(e,t);var r,n=!1;J(e,t)&&(X(e,t),n=-1!==[RP_CODE,TS_CODE,AL_CODE,LU_CODE,PE_CODE,SS_CODE,RF_CODE,"tstr","ch"].indexOf(e),r=W(e,t),M.info("Create new event: "+JSON.stringify(r[k.Params],null,2)),e===AL_CODE?b.add(e,r):D.add(r),G(e,t),(n||ee()>=y.getCountForRequest())&&re())},Q=function(){var e;0<E.getSessionLength()?(e=_defineProperty({},UE_LN,E.getSessionLength()),E.clearSessionLength(),Z(UE_CODE,e)):M.debug("The user engagement event was not generated, session length is zero")},$=function(){if(y.sync(),E.sync(),E.isTracking()){for(var e in L.start(),q)q[e].start();ne(),C.start(),E.haveBackendId()||I.start()}b.start(),te()},ee=function(){var e=D.getCountEventsByUser(E.getPrimaryId()),t=E.getCardChanges();return U.isNullOrEmpty(t)||e++,e},te=function(){0<ee()&&re()},re=function(){E.isTracking()&&(n(),K()),b.send()},ne=function(){var e=Date.now();E.getSessionId()&&e-E.getLastForeground()<y.getSessionTimeout()?(E.resumeSession(),M.debug("Resume session {sessionId} for user {user}",{sessionId:E.getSessionId(),user:E.getId()})):(0<E.getSessionLength()&&Q(),E.newSession(e),M.debug("Start new session {sessionId} for user {user}",{sessionId:E.getSessionId(),user:E.getId()}),Z(SS_CODE))};return v.prototype.getStorage=function(){return m},v.prototype.close=function(){B=!1},v.prototype.init=function(i,s){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0,u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},c=5<arguments.length?arguments[5]:void 0;return function(e){var t,r,n={appId:e=V.validAppId(i,s),ver:Y.getSdkVer()};if(void 0!==o[R.LogLevel]&&(M.setLogLevel(o[R.LogLevel]),delete o[R.LogLevel]),B)throw"SDK is already initialized";Y.isBot()||Y.useXDR()?(r="DTDAnalytics SDK is not initialised with key '{appId}' and version '{ver}'",Y.isBot()||Y.useXDR()||M.info(r,n)):(t=void 0!==c,m=new StorageManager,r=t,Y.setAppId(e),m.init(Y.getAppId(),{base64:Y.isBase64()}),y=new AppModel(m.getApp()),E=new UserModel(m.getUser()),r&&(A=new ExperimentsModel(m.getExperiments())),D=m.getEvent(),q.session=new H("session",d,5e3),q.alive=new H("alive",l,y.getAliveTimeout()),q.queue=new H("queue",p,y.getTimeForRequest()),q.ca=new H("ca",f,y.getCATimeout()),b=new j(Y,E,D,y,5e3),C=new F("sdk",Y,E,y,function(e){y.setConfigSdk(e),q.alive.setDelay(y.getAliveTimeout()),q.ca.setDelay(y.getCATimeout()),q.queue.setDelay(y.getTimeForRequest()),M.debug("The SDK analytics configuration has been received: "+JSON.stringify(e,null,2))},function(){M.debug("Try get analytics configuration from server")}),I=new F("d2dId",Y,E,y,function(e){var t,r=DTDRequestResponse;for(t in r)r.hasOwnProperty(t)&&void 0!==e[r[t]]&&E.setAttr(t,e[r[t]]);S&&S.audienceState.updateAudienceState(e,!1,"d2dId");var n=Y.getCallbackDId(),i=E.getD2dId(),s=E.getD2dTm(),o="For user [{userId}] updated backendIdentifiers are: \r\ndevtodevId {devtodevId} \r\ndevtodevIdTimestamp: {d2dTimId}",s={userId:E.getDeviceId(),devtodevId:i,d2dTimId:s};E.getD2dCrossId()&&(o+="\r\ncrossPlatformDevtodevId: {cDevtodevId}",s.cDevtodevId=E.getD2dCrossId()),M.debug(o,s),null!==n&&n(i)}),M.info("DTDAnalytics SDK is initialised with key '{appId}' and version '{ver}'",n),function(e){var t=null,r="Initialize";void 0!==e[R.UserId]&&(t=V.validUserId("Initialize",e[R.UserId]));var n,i=U.isNullOrEmpty(t)?1:0,s=m.getUser().lastActive();(i=i||t==y.getUUID())&&(t=y.getUUID()),U.isNullOrEmpty(s)?(E.create(t,i),M.debug("It is clean SDK start")):i?E.init(s):(n=m.getUser().findPrimaryIdByCondition(_defineProperty({},O.UserId,t)),U.isNullOrEmpty(n)?(E.init(s),E.isDefault()||E.isDeviceCounting()?E.replaceUserId(t):E.create(t,i)):E.init(n)),void 0!==e[R.Tracking]&&(i=e[R.Tracking],n=E.isTracking(),V.validTraking(r,i)&&(n===i&&!1!==i||Z(TS_CODE,_defineProperty({},TS_ALLOWED,i)))),void 0!==e[R.CurrentLevel]&&h(r,e[R.CurrentLevel]),void 0!==e[R.AppVersion]&&g(r,e[R.AppVersion])}(o),t&&(S=new c(F,Y,H,E,y,A,b,m,u)),B=!0,T.start(),E.isTracking()?(L.start(),C.start(),I.start(),t&&S.startAbTestLogic(),_()):M.info("DTDAnalytics not active! Tracking status is Disable!",n),E.isDeviceCounting()&&E.setDeviceCounting(0),U.isFunction(a)&&a())}(s)},v.prototype.setLevel=function(e,t){u()&&h(e,t)},v.prototype.sendEvents=function(){u()&&te()},v.prototype.addEvent=function(e,t,r){u()&&Z(t,r,e)},v.prototype.setTracking=function(e,t){var r;u()&&V.validTraking(e,t)&&(r="Tracking status is already {status}",t!==(e=E.isTracking())&&(Z(TS_CODE,_defineProperty({},TS_ALLOWED,t),!0),o(e),E.isTracking()&&(_(),n(!0)),r="Tracking status is {status}"),M.info(r,{status:E.isTracking()?"Enable":"Disable"}))},v.prototype.setUserId=function(e,t){if(u()){var r,n,i=V.validUserId(e,t),s=null===i?1:0,o=!1;if(U.isNullOrEmpty(i)&&""!==t?o=!(r="UserId is empty"):s==E.isDefault()&&s?r="It's already default user!":i===E.getId()?r="The current userId is equal to the new userId [{user}]":(n={newUser:s?"":i,oldUser:E.getId()},o=!0,E.isDefault()?(E.replaceUserId(i,!1),M.info("User '{oldUser}' has been renamed to '{newUser}'",n)):(Q(),b.unfreeze(),te(),e=_defineProperty({},O.UserId,i),s&&(e=_defineProperty({},O.IsDefault,1)),e=m.getUser().findPrimaryIdByCondition(e),M.info("The userId '{oldUser}' changed to '{newUser}'",n),c(e,i,s)),E.haveBackendId()||(I.clear(),I.start())),!o)throw M.warning(r,{user:t}),null}},v.prototype.setAppVer=function(e,t){var r;u()&&(r=y.getAppVer(),g(e,t),E.isTracking()&&r!=y.getAppVer()&&(C.clear(),C.start()))},v.prototype.replaceUserId=function(e,t,r){if(u()){var n=V.validReplaceId(e,t,r),t=n.prevId,r=n.id,i="The fromUserId is equal to the toUserId [{id}]!",s=!1,o=_defineProperty({},O.UserId,t);U.isNullOrEmpty(t)&&(o=_defineProperty({},O.IsDefault,1)),(e=m.getUser().findPrimaryIdByCondition(o))!=(t=m.getUser().findPrimaryIdByCondition(_defineProperty({},O.UserId,r)))&&(i=U.isNullOrEmpty(e)?"The userId: [{prevId}] not found!":(e!=E.getPrimaryId()?t==E.getPrimaryId()?(c(e),E.replaceUserId(r,!1)):((o=new UserModel(m.getUser())).init(e),o.replaceUserId(r,!1)):(E.replaceUserId(r,!1),a()),U.isNullOrEmpty(t)||(D.removeByPrimaryUserId(t),m.getUser().removeByPrimaryId(t)),s=!0,"User '{prevId}'renamed to '{id}'"));n={prevId:n.prevId||"",id:n.id};if(!s)throw M.warning(i+" Replace not possible!",n),null;M.info(i,n),E.haveBackendId()||(I.clear(),I.start())}},v.prototype.setCA=function(e,t,r,n,i){u()&&E.isTracking()&&(i=V.validCA(e,t,r,n,i,E.getCA()),E.setCA(i),M.info("Set currency accrual: {data}",{data:JSON.stringify(E.getCA())}))},v.prototype.startPe=function(e,t){u()&&(e=V.validStartPe(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),t=PE_CODE,r()||V.isExcluded(y.getEventsExcluded(),t,e)||z.start(e.name,e))},v.prototype.stopPe=function(e,t){u()&&(e=V.validStopPe(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),t=PE_CODE,r()||V.isExcluded(y.getEventsExcluded(),t,e)||!1!==(e=z.finish(e.name,e))&&Z(t,e))},v.prototype.getter=function(e){if(u())switch(e){case"appVer":return y.getAppVer();case"userId":return E.getId();case"level":return E.getLevel();case"tracking":return E.isTracking();case"deviceId":return E.getDeviceId();case"sdkVer":return Y.getSdkVer();default:return null}},v.prototype.getCardField=function(e,t){if(u()){t=V.validPlKey(e,t);return E.getCardField(t)}},v.prototype.setCardField=function(e,t,r){var n;u()&&(n=V.validPlKey(e,t),e=V.validPlVal(e,n,r),r=E.getCard(),n===DTDPeople.Cheater?i(e):n===DTDPeople.Tester?s(e):void 0!==r[t]&&r[t]==e||(E.setCardField(n,e),M.info("[User Card] Value ["+e+"] for the key ["+n+"] was set successfully"),S&&S.audienceState.updateAudienceState({},!0,"cardField")))},v.prototype.unsetCardField=function(t,e){u()&&(e=U.isArray(e)?e:[e],x.forEach(function(e){e=V.validPlKey(t,e,!1);null!==e&&(e===DTDPeople.Cheater?i(!1):e===DTDPeople.Tester?s(!1):E.unsetCardField(e))},e),M.info("User data has been successfully removed from the user profile",{}))},v.prototype.cleareCard=function(){var e;u()&&(e=PL_CODE,E.clearCard(),E.clearCardChanges(),M.info("All user data has been cleared successfully",{event:e}),Z(e,_defineProperty({},PL_PARAMS,null)))},v.prototype.setCallbackDId=function(e){var t;Y.setCallbackDId(e),B&&(t=E.getD2dId(),e=Y.getCallbackDId(),U.isNullOrEmpty(t)||U.isNullOrEmpty(e)||e(t))},v.prototype.setSDKVer=function(e,t){V.validAppVer(e,t)&&(Y.setSdkVer(t),M.info('SDK version "{val}" is set successfully',{val:Y.getSdkVer()}))},v.prototype.setSDKVerCode=function(e,t){V.validSdkCode(e,t)&&(Y.setSdkVerCode(t),M.info('SDK version code "{val}" is set successfully',{val:Y.getSdkVerCode()}))},v.prototype.getUser=function(){return E},v.prototype.getApp=function(){return y},v.prototype.getIsInitialized=function(){return!!B},v.prototype.applyAbConfig=function(){B?S?S.applyConfig():M.error("The SDK is initialized without the AB tests!"):M.error("The SDK is not initialized yet!")},v.prototype.resetAbConfig=function(){B?S?S.resetConfig():M.error("The SDK is initialized without the AB tests!"):M.error("The SDK is not initialized yet!")},{getInstance:function(){return w=w||new v}}}();DTDRemoteConfig=function(e,t,r){Object.defineProperty(this,"remoteConfigWaiting",{set:function(e){r.remoteConfigWaiting=e},get:function(){return r.remoteConfigWaiting}}),Object.defineProperty(this,"groupDefinitionWaiting",{set:function(e){r.groupDefinitionWaiting=e},get:function(){return r.groupDefinitionWaiting}}),Object.defineProperty(this,"defaults",{set:function(e){r.defaults=e},get:function(){return r.defaults}}),Object.defineProperty(this,"config",{get:function(){return r.config}}),Object.defineProperty(this,"cacheTestExperiment",{get:function(){return r.cacheTestExperiment}}),this.applyConfig=function(){e.applyAbConfig()},this.resetConfig=function(){e.resetAbConfig()}};var DTDUserCard=function(){function r(e,t){null!==e&&i.error(MES_PREFIX+e,{method:t}),i.error("Execution of the {method} method was canceled!",{method:t})}var n,i=DTDLogger.getInstance(),s=DTDPeople;function e(e){n=e}return e.prototype.setTester=function(e){var t="setTester";try{n.setCardField(t,s.Tester,e)}catch(e){r(e,t)}},e.prototype.setCheater=function(e){var t="setCheater";try{n.setCardField(t,s.Cheater,e)}catch(e){r(e,t)}},e.prototype.set=function(e,t){try{n.setCardField("set",e,t)}catch(e){r(e,"set")}},e.prototype.getValue=function(e){var t="getValue";try{return n.getCardField(t,e)}catch(e){r(e,t)}},e.prototype.unset=function(e){try{n.unsetCardField("unset",e)}catch(e){r(e,"unset")}},e.prototype.clearUser=function(){try{n.cleareCard()}catch(e){r(e,"clearUser")}},e}(),DTDAnalitics=function(){function a(e,t){null!==e&&r.error(MES_PREFIX+e,{method:t}),r.error("Execution of the {method} method was canceled!",{method:t})}var t=DTDSystemManager.getInstance(),r=DTDLogger.getInstance(),u=DTDClient.getInstance(),i=AbTestsManagerFactory(u,r),n=new DTDRemoteConfig(u,r,i),o=DTDTypeValidator,s=null;function e(e){t.setEnv(e),Object.defineProperty(this,"logLevel",{get:function(){return r.getLogLevel()},set:function(e){r.setLogLevel(e)}}),Object.defineProperty(this,"user",{get:function(){return new DTDUserCard(u)}}),Object.defineProperty(this,"remoteConfig",{get:function(){return n}})}return e.prototype.initialize=function(e,t){var r="Initialize";try{u.init(r,e,t,s)}catch(e){a(e,r)}},e.prototype.initializeWithAbTest=function(e,t,r){var n="InitializeWithAbTest";try{u.init(n,e,t,s,r,i)}catch(e){a(e,n)}},e.prototype.getAppVersion=function(){try{return u.getter("appVer")}catch(e){a(e,"getAppVersion")}},e.prototype.setAppVersion=function(e){var t="setAppVersion";try{u.setAppVer(t,e)}catch(e){a(e,t)}},e.prototype.getUserId=function(){try{return u.getter("userId")}catch(e){a(e,"getUserId")}},e.prototype.setUserId=function(e){var t="SetUserId";try{u.setUserId(t,e)}catch(e){a(e,t)}},e.prototype.getCurrentLevel=function(){try{return u.getter("level")}catch(e){a(e,"getCurrentLevel")}},e.prototype.setCurrentLevel=function(e){var t="SetCurrentLevel";try{u.setLevel(t,e)}catch(e){a(e,t)}},e.prototype.setTrackingAvailability=function(e){var t="SetTrackingAvailability";try{u.setTracking(t,e)}catch(e){a(e,t)}},e.prototype.getTrackingAvailability=function(){try{return u.getter("tracking")}catch(e){a(e,"getTrackingAvailability")}},e.prototype.getDeviceId=function(){try{return u.getter("deviceId")}catch(e){a(e,"getDeviceId")}},e.prototype.getSDKVersion=function(){try{return u.getter("sdkVer")}catch(e){a(e,"getSDKVersion")}},e.prototype.socialNetworkConnect=function(e){var t="SocialNetworkConnect";try{u.addEvent(t,SC_CODE,_defineProperty({},SC_NET,e))}catch(e){a(e,t)}},e.prototype.socialNetworkPost=function(e,t){var r,n="SocialNetworkPost";try{u.addEvent(n,SP_CODE,(_defineProperty(r={},SP_NET,e),_defineProperty(r,SP_REASON,t),r))}catch(e){a(e,n)}},e.prototype.tutorial=function(e){var t="Tutorial";try{u.addEvent(t,TR_CODE,_defineProperty({},TR_STEP,e))}catch(e){a(e,t)}},e.prototype.realCurrencyPayment=function(e,t,r,n){var i,s="realCurrencyPayment";try{u.addEvent(s,RP_CODE,(_defineProperty(i={},RP_PRICE,t),_defineProperty(i,RP_ORDER_ID,e),_defineProperty(i,RP_PRODUCT_ID,r),_defineProperty(i,RP_CURRENCY,n),i))}catch(e){a(e,s)}},e.prototype.virtualCurrencyPayment=function(e,t,r){var n="virtualCurrencyPayment",i=arguments.length<=3?0:arguments.length-3,s=(_defineProperty(s={},VP_PURCHASE_ID,e),_defineProperty(s,VP_PURCHASE_TYPE,t),_defineProperty(s,VP_PURCHASE_AMOUNT,r),s);0<i&&(1==i&&o.isObject(arguments.length<=3?void 0:arguments[3])?s.r=arguments.length<=3?void 0:arguments[3]:(s.p=arguments.length<=3?void 0:arguments[3],s.c=arguments.length<=4?void 0:arguments[4]));try{u.addEvent(n,VP_CODE,s)}catch(e){a(e,n)}},e.prototype.customEvent=function(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="customEvent";try{u.addEvent(n,CE_CODE,(_defineProperty(t={},CE_NAME,e),_defineProperty(t,CE_PARAMS,r),t))}catch(e){a(e,n)}},e.prototype.levelUp=function(e,t,r,n,i){var s,o="levelUp";try{u.addEvent(o,LU_CODE,(_defineProperty(s={},LU_LEVEL,e),_defineProperty(s,LU_BOUGHT,i),_defineProperty(s,LU_BALANCE,t),_defineProperty(s,LU_SPENT,r),_defineProperty(s,LU_EARND,n),s))}catch(e){a(e,o)}},e.prototype.currencyAccrual=function(e,t,r,n){var i="currencyAccrual";try{u.setCA(i,e,t,r,n)}catch(e){a(e,i)}},e.prototype.replaceUserId=function(e,t){var r="replaceUserId";try{u.replaceUserId(r,e,t)}catch(e){a(e,r)}},e.prototype.startProgressionEvent=function(e,t){var r="startProgressionEvent";try{u.startPe(r,e,t)}catch(e){a(e,r)}},e.prototype.finishProgressionEvent=function(e,t){var r="finishProgressionEvent";try{u.stopPe(r,e,t)}catch(e){a(e,r)}},e.prototype.referrer=function(e){var t="Referrer";try{u.addEvent(t,RF_CODE,e)}catch(e){a(e,t)}},e.prototype.sendBufferedEvents=function(){try{u.sendEvents()}catch(e){a(e,"sendBufferedEvents")}},e.prototype.setIdentifiersListener=function(e){u.setCallbackDId(e)},e.prototype.adImpression=function(e,t,r,n){var i,s="adImpression";try{u.addEvent(s,ADRV_CODE,(_defineProperty(i={},ADRV_NETWORK,e),_defineProperty(i,ADRV_UNIT,n),_defineProperty(i,ADRV_REVENUE,t),_defineProperty(i,ADRV_PLACEMENT,r),i))}catch(e){a(e,s)}},e.prototype.onDebugMessage=function(e){r.setCallback(e)},e.prototype.testLogs=function(){r.error("this is error message"),r.warning("this is warning message"),r.info("this is info message"),r.debug("this is debug message")},e.prototype.currentBalance=function(e){var t="currentBalance";try{u.addEvent(t,CB_CODE,e)}catch(e){a(e,t)}},e.prototype.setInitializationCompleteCallback=function(e){try{o.isFunction(e)?s=e:r.error(MES_PREFIX+"The parameter must be a function",{method:"setInitializationCompleteCallback"})}catch(e){a(e,"getAppVersion")}},e}(),DTDAnaliticsTest=function(){"use strict";function e(){DTDAnalitics.call(this,{base64:!1}),Object.defineProperty(this,"testProxyUrl",{get:function(){return t.getApiUrl()},set:function(e){t.setApiUrl(e)}}),Object.defineProperty(this,"testCustomUrl",{get:function(){return t.getTestCustomUrl()},set:function(e){t.setTestCustomUrl(e)}})}var t=DTDSystemManager.getInstance();return(e.prototype=Object.create(DTDAnalitics.prototype)).constructor=e}(),DTDAnaliticsUnity=function(){"use strict";function i(e,t){return void 0===e||""==e||t==e}function e(e){DTDAnalitics.call(this,e)}var f=DTDClient.getInstance(),p=DTDSystemManager.getInstance(),h=DTDUserStorage,g=DTDTypeValidator,_=DTDLogger.getInstance();return((e.prototype=Object.create(DTDAnalitics.prototype)).constructor=e).prototype._migration=function(e,t,r,n,i){p.setAppId(e);var s=f.getStorage(),o=DTDUserStorage,a=DTDAppStorage;s.init(p.getAppId(),{base64:p.isBase64()});var u=new AppModel(s.getApp()),e=new UserModel(s.getUser());if(u.isMigration())_.warning("Already migration");else{s=s.getUser().findPrimaryIdByCondition(_defineProperty({},h.UserId,t));if(g.isNullOrEmpty(s)){e.create(t,r);var c,d=_defineProperty({},o.DeviceCounting,n),l=_defineProperty({},a.IsMigration,1);for(c in i)if(!g.isNullOrEmpty(i[c]))switch(c){case"prevUserId":d[o.PrevUserId]=i[c],d[o.PrevDeviceId]=i[c];break;case"trackingAvailable":d[o.Tracking]=i[c];break;case"level":d[o.CurrentLevel]=i[c];break;case"userCard":d[o.Profile]=i[c];break;case"tutorCompletedSteps":d[o.TutorialSteps]=i[c];break;case"transactionIds":l[a.TransactionIds]=i[c]}e.setAttrs(d),u.setAttrs(l)}else _.warning("User not empty")}},e.prototype.migrationUser=function(e,t){var r,n;void 0!==e&&void 0!==t&&(void 0!==(t=JSON.parse(t)).deviceId&&(n=t.deviceId),void 0!==t.userId&&(r=t.userId),n=i(r,n),this._migration(e,r,n,0,t))},e.prototype.migrationDevice=function(e,t){var r,n;void 0!==e&&void 0!==t&&(void 0!==(t=JSON.parse(t)).deviceId&&(r=t.deviceId),void 0!==t.userId&&(n=t.userId),n=i(n,r),delete t.prevUserId,this._migration(e,r,n,1,t))},DTDAnalitics.prototype.setSDKVersion=function(e){var t="setSDKVersion";try{f.setSDKVer(t,e)}catch(e){_.error(e,t)}},DTDAnalitics.prototype.setSdkCodeVersion=function(e){var t="setSdkCodeVersion";try{f.setSDKVerCode(t,e)}catch(e){_.error(e,t)}},e}(),DTDAnaliticsUnityTest=function(){"use strict";function e(){DTDAnaliticsUnity.call(this,{engine:"unity"}),Object.defineProperty(this,"testProxyUrl",{get:function(){return t.getApiUrl()},set:function(e){t.setApiUrl(e)}}),Object.defineProperty(this,"testCustomUrl",{get:function(){return t.getTestCustomUrl()},set:function(e){t.setTestCustomUrl(e)}})}var t=DTDSystemManager.getInstance(),r=DTDClient.getInstance();return((e.prototype=Object.create(DTDAnaliticsUnity.prototype)).constructor=e).prototype.close=function(){r.close()},e.prototype.getClient=function(){return r},e}(),DTDRemoteConfigCollection=function(e,t){for(var r in this._config={},this._source=t,e)this._config[r]=e[r],function(e){Object.defineProperty(this,e,{get:function(){return new DTDRemoteConfigValue(this._config[e],this._source)},configurable:!0,enumerable:!0})}.call(this,r);Object.defineProperty(this,"values",{get:function(){return this._config},configurable:!0,enumerable:!0})};DTDRemoteConfigCollection.prototype.hasKey=function(e){return void 0!==this._config[e]};var DTDRemoteConfigValue=function(e,t){this._value=e,this._source=t,this._logger=DTDLogger.getInstance(),Object.defineProperty(this,"stringValue",{get:function(){return String(this._value)}}),Object.defineProperty(this,"floatValue",{get:function(){var e=parseFloat(this._value);return isNaN(e)?(this._logger.error("Unable to parse value as Float."),0):e}}),Object.defineProperty(this,"doubleValue",{get:function(){var e=parseFloat(this._value);return isNaN(e)?(this._logger.error("Unable to parse value as Double."),0):e}}),Object.defineProperty(this,"longValue",{get:function(){try{return String(BigInt(this._value))}catch(e){return this._logger.error("Unable to parse value as Long: "+e.message),"0"}}}),Object.defineProperty(this,"intValue",{get:function(){var e=parseInt(this._value,10);return isNaN(e)?(this._logger.error("Unable to parse value as Int."),0):e}}),Object.defineProperty(this,"boolValue",{get:function(){return Boolean(this._value)}}),Object.defineProperty(this,"source",{get:function(){return this._source}})};
window.devtodev=new DTDAnalitics();
})(this);
